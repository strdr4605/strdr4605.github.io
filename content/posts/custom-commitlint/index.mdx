---
title: Custom commitlint header format
date: 2022-01-11
description: A guide to customize the commitlint header format to your need and use it as convention in your git repository.
tags:
  - tools
  - git
  - npm
---

[Commitlint](https://commitlint.js.org/) is the next step on enforcing rules in your JS project after eslint.

Installation and configuration is very simple:

```bash
echo "module.exports = {extends: ['@commitlint/config-conventional']}" > commitlint.config.js
```

Commitlint suggests [Conventional commits](https://www.conventionalcommits.org/en/) which have this format:

```
type(scope?): subject
```

But what if I want to use a custom format specific for my team?! Let's say I want to use emoji as a type, an optional ticket and then the subject, like:

```
type [ticket]? subject
```

To change the header format I need to change `headerPattern` from `parserOpts` config:

First I need to find a RegExp that will match `"âœ… [T-4605] Add tests"`, also we need to add at least one rule so let's add `type-enum` that is [provided by commitlint](https://commitlint.js.org/#/reference-rules) to set allowed emojis

```js
// commitlint.config.js
// emojis like "âœ… ", "ðŸ˜‚ ", ...
const matchAnyEmojiWithSpaceAfter =
  /(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])\s/;
const matchOptionalTicketNumberWithSpaceAfter = /(?:\[(T-\d+)\]\s)?/; // "[T-4605] ", "[T-1]"
const subjectThatDontStartWithBracket = /([^\[].+)/; // "Add tests" but don't allow "[ Add tests"

module.exports = {
  parserPreset: {
    parserOpts: {
      headerPattern: new RegExp(
        "^" +
          matchAnyEmojiWithSpaceAfter.source +
          matchOptionalTicketNumberWithSpaceAfter.source +
          subjectThatDontStartWithBracket.source +
          "$"
      ),
      headerCorrespondence: ["type", "ticket", "subject"],
    },
  },
  rules: {
    "type-enum": [2, "always", ["â­ï¸", "ðŸž", "âœ…", "ðŸš§", "â™»ï¸", "ðŸ“"]],
  },
};
```

Testing locally:

```bash
> echo "âœ… [T-4605] Add tests" | commitlint # passes
> echo "âœ… Add tests" | commitlint # passes
> echo "Something else" | commitlint # should fail but still passes ðŸ¤”
```

The problem is that there is no rule to make sure that header matched our RegExp. I can add 2 other rules from commitlint:

```js
"type-empty": [2, "never"],
"subject-empty": [2, "never"],
```

but what if I have other variables names, `emoji` instead of `type`, `desc` instead of `subject`?

I need to create custom rule using [Commitlint plugins](https://commitlint.js.org/#/reference-plugins).
