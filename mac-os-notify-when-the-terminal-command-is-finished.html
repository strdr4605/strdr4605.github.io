<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>MacOS: notify when the terminal command is finished</title><meta name="description" content="I created a small bash function to notify me when a long-running terminal command finishes"/><meta property="og:title" content="MacOS: notify when the terminal command is finished"/><meta property="og:description" content="I created a small bash function to notify me when a long-running terminal command finishes"/><meta property="og:image" content="https://strdr4605.com/mac-os-notify-when-the-terminal-command-is-finished.jpg"/><meta property="og:type" content="article"/><link rel="canonical" href="https://strdr4605.com/mac-os-notify-when-the-terminal-command-is-finished"/><meta name="next-head-count" content="9"/><meta charSet="UTF-8"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><meta property="og:locale" content="en_GB"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@strdr4605"/><meta name="theme-color" content="#FAF181"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-171697116-1"></script><script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){dataLayer.push(arguments);}
                    gtag('js', new Date());

                    gtag('config', 'UA-171697116-1', {
                      page_path: window.location.pathname,
                    });
                  </script><link rel="preload" href="/_next/static/css/83a77daccbc30077.css" as="style"/><link rel="stylesheet" href="/_next/static/css/83a77daccbc30077.css" data-n-g=""/><link rel="preload" href="/_next/static/css/bc274fc7c99985a3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bc274fc7c99985a3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9e60bad828f3ecaa.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-e267bb9839e5051c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-960db24c14844c7a.js" defer=""></script><script src="/_next/static/chunks/453-0a4b1ae71b489eee.js" defer=""></script><script src="/_next/static/chunks/pages/%5BpostSlug%5D-2bfde3a588be30eb.js" defer=""></script><script src="/_next/static/ngQhVyGJPQqQcClow_DWc/_buildManifest.js" defer=""></script><script src="/_next/static/ngQhVyGJPQqQcClow_DWc/_ssgManifest.js" defer=""></script><script src="/_next/static/ngQhVyGJPQqQcClow_DWc/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Layout_container__n__U4"><article><h1>MacOS: notify when the terminal command is finished</h1><i><time dateTime="2023-04-20">20 Apr 2023</time></i> on <a href="/"><span>Dragoș Străinu</span>&#x27;s blog</a><br/><div><p>After reading <a href="https://evanhahn.com/a-decade-of-dotfiles/">A decade of dotfiles</a> I wanted to create a similar bash function to <code>boop</code>.</p>
<p>And here it is:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token comment"># ~/.zshrc</span>

<span class="token comment"># ...rest of zshrc</span>

,<span class="token function-name function">notify</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">last_exit_status</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$?</span>"</span>

  <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$last_exit_status</span>"</span> <span class="token operator">==</span> <span class="token string">'0'</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    osascript <span class="token parameter variable">-e</span> <span class="token string">"display notification <span title="\&#x22;" class="token entity">\"</span>Done<span title="\&#x22;" class="token entity">\"</span> with title <span title="\&#x22;" class="token entity">\"</span>Good<span title="\&#x22;" class="token entity">\"</span> sound name <span title="\&#x22;" class="token entity">\"</span>Fonk<span title="\&#x22;" class="token entity">\"</span>"</span>
  <span class="token keyword">else</span>
    osascript <span class="token parameter variable">-e</span> <span class="token string">"display notification <span title="\&#x22;" class="token entity">\"</span>Exit code: <span class="token variable">$last_exit_status</span><span title="\&#x22;" class="token entity">\"</span> with title <span title="\&#x22;" class="token entity">\"</span>Bad<span title="\&#x22;" class="token entity">\"</span> sound name <span title="\&#x22;" class="token entity">\"</span>Ping<span title="\&#x22;" class="token entity">\"</span>"</span>
  <span class="token keyword">fi</span>
  <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">exit</span> <span class="token string">"<span class="token variable">$last_exit_status</span>"</span><span class="token variable">)</span></span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>It uses <a href="https://ss64.com/osx/osascript.html">osascript</a> to execute the AppleScripts that pushes the notification.<br>
According to <a href="https://stackoverflow.com/questions/67406491/osascript-how-to-pass-in-a-variable/67413043#67413043">stackoverflow</a>
this is not the best way to pass bash variable to osascript,
but I did not understand how to do it for my use case and as I use <code>last_exit_status</code> there should be no problem.</p>
<p>usage:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> run <span class="token builtin class-name">test</span><span class="token punctuation">;</span>,notify
</code></pre></div>
<p>I prefix the function name with a comma to faster search for it when doing <code>;,&#x3C;Tab></code>.</p>
<p>You can test it with <code>(exit 0);,notify</code> and <code>(exit 1);,notify</code>.</p>
<p><img src="/notify-good.png" alt="notify good">
<img src="/notify-bad.png" alt="notify bad"></p>
</div><footer class="PostFooter_footer__nLJ4b">Liked this post? Follow me<!-- --> <a target="_blank" href="http://twitter.com/strdr4605" rel="noreferrer">@strdr4605</a> <!-- -->to get more updates.</footer></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"title":"MacOS: notify when the terminal command is finished","date":"2023-04-20T00:00:00.000Z","description":"I created a small bash function to notify me when a long-running terminal command finishes","tags":["macos","bash","zsh"],"slug":"mac-os-notify-when-the-terminal-command-is-finished","contentHtml":"\u003cp\u003eAfter reading \u003ca href=\"https://evanhahn.com/a-decade-of-dotfiles/\"\u003eA decade of dotfiles\u003c/a\u003e I wanted to create a similar bash function to \u003ccode\u003eboop\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eAnd here it is:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# ~/.zshrc\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# ...rest of zshrc\u003c/span\u003e\n\n,\u003cspan class=\"token function-name function\"\u003enotify\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003elocal\u003c/span\u003e \u003cspan class=\"token assign-left variable\"\u003elast_exit_status\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$?\u003c/span\u003e\"\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$last_exit_status\u003c/span\u003e\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token string\"\u003e'0'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethen\u003c/span\u003e\n    osascript \u003cspan class=\"token parameter variable\"\u003e-e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"display notification \u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003eDone\u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003e with title \u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003eGood\u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003e sound name \u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003eFonk\u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003e\"\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\n    osascript \u003cspan class=\"token parameter variable\"\u003e-e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"display notification \u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003eExit code: \u003cspan class=\"token variable\"\u003e$last_exit_status\u003c/span\u003e\u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003e with title \u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003eBad\u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003e sound name \u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003ePing\u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003e\"\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003efi\u003c/span\u003e\n  \u003cspan class=\"token variable\"\u003e\u003cspan class=\"token variable\"\u003e$(\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003eexit\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$last_exit_status\u003c/span\u003e\"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eIt uses \u003ca href=\"https://ss64.com/osx/osascript.html\"\u003eosascript\u003c/a\u003e to execute the AppleScripts that pushes the notification.\u003cbr\u003e\nAccording to \u003ca href=\"https://stackoverflow.com/questions/67406491/osascript-how-to-pass-in-a-variable/67413043#67413043\"\u003estackoverflow\u003c/a\u003e\nthis is not the best way to pass bash variable to osascript,\nbut I did not understand how to do it for my use case and as I use \u003ccode\u003elast_exit_status\u003c/code\u003e there should be no problem.\u003c/p\u003e\n\u003cp\u003eusage:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e run \u003cspan class=\"token builtin class-name\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e,notify\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eI prefix the function name with a comma to faster search for it when doing \u003ccode\u003e;,\u0026#x3C;Tab\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eYou can test it with \u003ccode\u003e(exit 0);,notify\u003c/code\u003e and \u003ccode\u003e(exit 1);,notify\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/notify-good.png\" alt=\"notify good\"\u003e\n\u003cimg src=\"/notify-bad.png\" alt=\"notify bad\"\u003e\u003c/p\u003e\n"},"_superjson":{"values":{"postData.date":["Date"]}}},"__N_SSG":true},"page":"/[postSlug]","query":{"postSlug":"mac-os-notify-when-the-terminal-command-is-finished"},"buildId":"ngQhVyGJPQqQcClow_DWc","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>