<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Meteor: a better way to use meteor npm command</title><meta name="description" content="Did you forget to add meteor command before npm? Try adding a bash script that will make sure you always run it correctly."/><meta property="og:title" content="Meteor: a better way to use meteor npm command"/><meta property="og:description" content="Did you forget to add meteor command before npm? Try adding a bash script that will make sure you always run it correctly."/><meta property="og:image" content="https://strdr4605.com/meteor-a-better-way-to-use-meteor-npm-command.jpg"/><meta property="og:type" content="article"/><link rel="canonical" href="https://strdr4605.com/meteor-a-better-way-to-use-meteor-npm-command"/><meta name="next-head-count" content="9"/><meta charSet="UTF-8"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><meta property="og:locale" content="en_GB"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@strdr4605"/><meta name="theme-color" content="#FAF181"/><link rel="preload" href="/_next/static/css/83a77daccbc30077.css" as="style"/><link rel="stylesheet" href="/_next/static/css/83a77daccbc30077.css" data-n-g=""/><link rel="preload" href="/_next/static/css/bc274fc7c99985a3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bc274fc7c99985a3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9e60bad828f3ecaa.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-e267bb9839e5051c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0c351108ffe6ee8e.js" defer=""></script><script src="/_next/static/chunks/453-0a4b1ae71b489eee.js" defer=""></script><script src="/_next/static/chunks/pages/%5BpostSlug%5D-33ac54be726b76e3.js" defer=""></script><script src="/_next/static/tkDdWvU15sCOPEu3wMw2V/_buildManifest.js" defer=""></script><script src="/_next/static/tkDdWvU15sCOPEu3wMw2V/_ssgManifest.js" defer=""></script><script src="/_next/static/tkDdWvU15sCOPEu3wMw2V/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Layout_container__n__U4"><article><h1>Meteor: a better way to use meteor npm command</h1><i><time dateTime="2022-01-13">13 Jan 2022</time></i> on <a href="/"><span>Dragoș Străinu</span>&#x27;s blog</a><br/><div><p>Meteor advice to run <a href="https://docs.meteor.com/commandline.html#meteornpm"><code>meteor npm ...</code></a> instead of <code>npm ...</code>.</p>
<blockquote>
<p>Using the <code>meteor npm ...</code> commands in place of traditional <code>npm ...</code> commands is particularly important when using Node.js modules that have binary dependencies that make native C calls (like <code>bcrypt</code>) because doing so ensures that they are built using the same libaries.</p>
</blockquote>
<p>But if you are switching constantly between node projects (with/without meteor) sometimes you may forget to use <code>meteor npm ...</code> or use it in the wrong place.</p>
<h2>Solution</h2>
<p>We can create a bash function that will replace <code>npm</code> and run <code>meteor npm ...</code> if we have a <code>.meteor</code> folder in the project.</p>
<blockquote>
<p>as <a href="https://zodern.me/posts/meteor-local-folder/">all Meteor apps have a .meteor directory</a></p>
</blockquote>
<p>Edit your shell config file with <strong>vim</strong>, <strong>nano</strong>, or <strong>vscode</strong>. Add this function at the end of the file.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Add me to shell config file. ~/.zshrc or ~/.bashrc</span>
<span class="token assign-left variable">ORIGINAL_NPM</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> <span class="token function">npm</span><span class="token variable">)</span></span>
<span class="token function-name function">npm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token assign-left variable">RED</span><span class="token operator">=</span><span class="token string">'\033[0;31m'</span>
  <span class="token assign-left variable">GREEN</span><span class="token operator">=</span><span class="token string">'\033[0;92m'</span>
  <span class="token assign-left variable">NC</span><span class="token operator">=</span><span class="token string">'\033[0m'</span> <span class="token comment"># No Color</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token parameter variable">-d</span> .meteor <span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${RED}</span>Meteor project<span class="token variable">${NC}</span><span title="\n" class="token entity">\n</span>Running:<span title="\n" class="token entity">\n</span><span title="\n" class="token entity">\n</span><span title="\t" class="token entity">\t</span><span class="token variable">${GREEN}</span>meteor npm <span class="token variable">$@</span><span class="token variable">${NC}</span><span title="\n" class="token entity">\n</span>"</span><span class="token punctuation">;</span>
    meteor <span class="token function">npm</span> <span class="token variable">$@</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">eval</span> <span class="token variable">$ORIGINAL_NPM</span> <span class="token variable">$@</span>
  <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>If needed we can also add another function for <code>meteor node</code>.</p>
</div><footer class="PostFooter_footer__nLJ4b">Liked this post? Follow me<!-- --> <a target="_blank" href="http://twitter.com/strdr4605" rel="noreferrer">@strdr4605</a> <!-- -->to get more updates.</footer></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"title":"Meteor: a better way to use meteor npm command","date":"2022-01-13T00:00:00.000Z","description":"Did you forget to add meteor command before npm? Try adding a bash script that will make sure you always run it correctly.","tags":["tools","node","npm"],"slug":"meteor-a-better-way-to-use-meteor-npm-command","contentHtml":"\u003cp\u003eMeteor advice to run \u003ca href=\"https://docs.meteor.com/commandline.html#meteornpm\"\u003e\u003ccode\u003emeteor npm ...\u003c/code\u003e\u003c/a\u003e instead of \u003ccode\u003enpm ...\u003c/code\u003e.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUsing the \u003ccode\u003emeteor npm ...\u003c/code\u003e commands in place of traditional \u003ccode\u003enpm ...\u003c/code\u003e commands is particularly important when using Node.js modules that have binary dependencies that make native C calls (like \u003ccode\u003ebcrypt\u003c/code\u003e) because doing so ensures that they are built using the same libaries.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eBut if you are switching constantly between node projects (with/without meteor) sometimes you may forget to use \u003ccode\u003emeteor npm ...\u003c/code\u003e or use it in the wrong place.\u003c/p\u003e\n\u003ch2\u003eSolution\u003c/h2\u003e\n\u003cp\u003eWe can create a bash function that will replace \u003ccode\u003enpm\u003c/code\u003e and run \u003ccode\u003emeteor npm ...\u003c/code\u003e if we have a \u003ccode\u003e.meteor\u003c/code\u003e folder in the project.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eas \u003ca href=\"https://zodern.me/posts/meteor-local-folder/\"\u003eall Meteor apps have a .meteor directory\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eEdit your shell config file with \u003cstrong\u003evim\u003c/strong\u003e, \u003cstrong\u003enano\u003c/strong\u003e, or \u003cstrong\u003evscode\u003c/strong\u003e. Add this function at the end of the file.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# Add me to shell config file. ~/.zshrc or ~/.bashrc\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eORIGINAL_NPM\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token variable\"\u003e$(\u003c/span\u003e\u003cspan class=\"token function\"\u003ewhich\u003c/span\u003e \u003cspan class=\"token function\"\u003enpm\u003c/span\u003e\u003cspan class=\"token variable\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token function-name function\"\u003enpm\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token assign-left variable\"\u003eRED\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e'\\033[0;31m'\u003c/span\u003e\n  \u003cspan class=\"token assign-left variable\"\u003eGREEN\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e'\\033[0;92m'\u003c/span\u003e\n  \u003cspan class=\"token assign-left variable\"\u003eNC\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e'\\033[0m'\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# No Color\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e-d\u003c/span\u003e .meteor \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ethen\u003c/span\u003e\n    \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e${RED}\u003c/span\u003eMeteor project\u003cspan class=\"token variable\"\u003e${NC}\u003c/span\u003e\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003eRunning:\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003e\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003e\u003cspan title=\"\\t\" class=\"token entity\"\u003e\\t\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${GREEN}\u003c/span\u003emeteor npm \u003cspan class=\"token variable\"\u003e$@\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${NC}\u003c/span\u003e\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003e\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    meteor \u003cspan class=\"token function\"\u003enpm\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$@\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\n    \u003cspan class=\"token builtin class-name\"\u003eeval\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$ORIGINAL_NPM\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$@\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003efi\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eIf needed we can also add another function for \u003ccode\u003emeteor node\u003c/code\u003e.\u003c/p\u003e\n"},"_superjson":{"values":{"postData.date":["Date"]}}},"__N_SSG":true},"page":"/[postSlug]","query":{"postSlug":"meteor-a-better-way-to-use-meteor-npm-command"},"buildId":"tkDdWvU15sCOPEu3wMw2V","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>