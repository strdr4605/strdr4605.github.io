<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>How to set up Lexical editor in React Native</title><meta name="description" content="We will look at how to build a rich text editor in React Native using lexical editor, with the help of react-native-webview."/><meta property="og:title" content="How to set up Lexical editor in React Native"/><meta property="og:description" content="We will look at how to build a rich text editor in React Native using lexical editor, with the help of react-native-webview."/><meta property="og:image" content="https://strdr4605.com/how-to-set-up-lexical-editor-in-react-native.jpg"/><meta property="og:type" content="article"/><link rel="canonical" href="https://strdr4605.com/how-to-set-up-lexical-editor-in-react-native"/><link rel="stylesheet" href="https://unpkg.com/prismjs@1.28.0/plugins/diff-highlight/prism-diff-highlight.min.css"/><meta name="next-head-count" content="10"/><meta charSet="UTF-8"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><meta property="og:locale" content="en_GB"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@strdr4605"/><meta name="theme-color" content="#FAF181"/><link rel="preload" href="/_next/static/css/48668f542c06fc2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/48668f542c06fc2b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/bc274fc7c99985a3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bc274fc7c99985a3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-a14b3031894df84b.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-e267bb9839e5051c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0c351108ffe6ee8e.js" defer=""></script><script src="/_next/static/chunks/453-0a4b1ae71b489eee.js" defer=""></script><script src="/_next/static/chunks/pages/%5BpostSlug%5D-e608f0d849a4fb90.js" defer=""></script><script src="/_next/static/NEp106YUfFAK-NwTELFCE/_buildManifest.js" defer=""></script><script src="/_next/static/NEp106YUfFAK-NwTELFCE/_ssgManifest.js" defer=""></script><script src="/_next/static/NEp106YUfFAK-NwTELFCE/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Layout_container__n__U4"><article><h1>How to set up Lexical editor in React Native</h1><i><time dateTime="2024-02-21">21 Feb 2024</time></i> on <a href="/"><span>Dragoș Străinu</span>&#x27;s blog</a><br/><div><p>So you have a web app that uses Lexical editor and now you want to build the same editor on React Native, or maybe you just want to build a rich text editor in React Native using Lexical.
But unfortunately lexical does not <a href="https://github.com/facebook/lexical/discussions/2410">support React Native</a> at the moment.</p>
<p>So the idea that comes to mind is to try Lexical editor in a react-native-webview. There are similar solutions like <a href="https://github.com/imnapo/react-native-cn-quill">react-native-cn-quill</a> and <a href="https://github.com/wxik/react-native-rich-editor">react-native-rich-editor</a>.</p>
<p>But as <a href="https://docs.expo.dev/guides/editing-richtext/#custom-webview-based-editor">expo docs</a> say:</p>
<blockquote>
<p>If you need more configurability, you can build a similar library with an existing web-only editor.</p>
</blockquote>
<p>So let's implement a lexical editor in an Expo app.<br>
(This is a demo project but you can follow the steps to add the editor to an existing React Native app)</p>
<h2>Create the expo app</h2>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash">npx create-expo-app <span class="token parameter variable">-t</span> expo-template-blank-typescript
</code></pre></div>
<p>Now let's install <code class="language-unknown">react-native-webview</code>.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> i react-native-webview
</code></pre></div>
<p>And make some changes in <code class="language-unknown">App.tsx</code>, to display the WebView with <a href="https://playground.lexical.dev/">https://playground.lexical.dev/</a> (for now).</p>
<div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ./App.tsx</span>
<span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">StyleSheet</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Text</span><span class="token punctuation">,</span> <span class="token maybe-class-name">View</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"react-native"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">WebView</span></span> <span class="token keyword">from</span> <span class="token string">"react-native-webview"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span><span class="token property-access">container</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token string">"80%"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">Lexical Webview</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">WebView</span></span>
          <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> uri<span class="token operator">:</span> <span class="token string">"https://playground.lexical.dev"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginTop<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token maybe-class-name">StyleSheet</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token operator">:</span> <span class="token punctuation">{</span>
    flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    backgroundColor<span class="token operator">:</span> <span class="token string">"#e0e0e0"</span><span class="token punctuation">,</span>
    alignItems<span class="token operator">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
    justifyContent<span class="token operator">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>We should have this result:</p>
<p><img src="expo-webview-init.png#small" alt="expo-webview-init"></p>
<h2>Add lexical editor</h2>
<p>Other implementations for a rich text editor in react-native give us a predefined editor. However, we want to create our custom lexical editor with custom nodes and logic. So the only option is to create the editor from scratch.<br>
How? By creating a new app inside the project using <a href="https://docs.npmjs.com/cli/v7/using-npm/workspaces">npm workspaces</a>.</p>
<p>We add a workspace to <code class="language-unknown">package.json</code>:</p>
<div class="remark-highlight"><pre class="language-diff-json  diff-highlight"><code class="language-diff-json"><span class="token unchanged language-json"><span class="token prefix unchanged"> </span>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"react-native-lexical"</span><span class="token punctuation">,</span>
<span class="token prefix unchanged"> </span>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
<span class="token prefix unchanged"> </span>  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"node_modules/expo/AppEntry.js"</span><span class="token punctuation">,</span>
</span><span class="token inserted-sign inserted language-json"><span class="token prefix inserted">+</span>  <span class="token property">"workspaces"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token prefix inserted">+</span>    <span class="token string">"lexical-editor"</span>
<span class="token prefix inserted">+</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="token unchanged language-json"><span class="token prefix unchanged"> </span>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token prefix unchanged"> </span>    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"expo start"</span><span class="token punctuation">,</span>
<span class="token prefix unchanged"> </span>    <span class="token property">"android"</span><span class="token operator">:</span> <span class="token string">"expo start --android"</span><span class="token punctuation">,</span></span>
</code></pre></div>
<blockquote>
<p>We can name it how we want <code class="language-unknown">post-editor</code>, <code class="language-unknown">page-editor</code>. Also we can have multiple editors if needed.</p>
</blockquote>
<h3>Create web app as npm workspace</h3>
<p>For this, we will use <a href="https://vitejs.dev/">vite</a>.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> create vite@latest lexical-editor -- <span class="token parameter variable">--template</span> react-ts
</code></pre></div>
<p>Let's do a cleanup and some changes in lexical-editor app.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash">lexical-editor
├── README.md
├── index.html
├── package.json
├── src
│   ├── App.tsx
│   ├── index.css
│   ├── main.tsx
│   └── vite-env.d.ts
├── tsconfig.json
├── tsconfig.node.json
└── vite.config.ts
</code></pre></div>
<p>Important to not enable zoom in the WebView, add this to <code class="language-unknown">index.html</code>:</p>
<div class="remark-highlight"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>meta</span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1, maximum-scale=0.99, user-scalable=0<span class="token punctuation">"</span></span>
<span class="token punctuation">/></span></span>
</code></pre></div>
<p>Now we can run the web app:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token comment"># in the root of expo app, we run script from lexical-editor workspace</span>
<span class="token function">npm</span> <span class="token parameter variable">--workspace</span><span class="token operator">=</span>lexical-editor run dev
</code></pre></div>
<p>And we can see this in the browser:</p>
<p><img src="lexical-vite-init.png" alt="lexical-vite-init"></p>
<p>Cool, now how can we put this into <code class="language-unknown">react-native-webview</code>?!</p>
<h3>Build a web app for react-native-webview</h3>
<p>For this, we need some vite plugins that will build the app into a single file that we will import into react-native-webview.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token parameter variable">-w</span><span class="token operator">=</span>lexical-editor i <span class="token parameter variable">-D</span> vite-plugin-singlefile
</code></pre></div>
<p>and let's change the <code class="language-unknown">vite.config.ts</code>:</p>
<div class="remark-highlight"><pre class="language-ts"><code class="language-ts"><span class="token comment">// .lexical-editor/vite.config.ts</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">"fs"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> viteSingleFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite-plugin-singlefile"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> react <span class="token keyword">from</span> <span class="token string">"@vitejs/plugin-react"</span><span class="token punctuation">;</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  build<span class="token operator">:</span> <span class="token punctuation">{</span>
    watch<span class="token operator">:</span> <span class="token punctuation">{</span>
      include<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      buildDelay<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">react</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">viteSingleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">"vite-plugin-html-string"</span><span class="token punctuation">,</span>
      <span class="token function">closeBundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> bundle <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">"dist/index.html"</span><span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> escaped <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>bundle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> js <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">export default </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>escaped<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

        fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">"dist/htmlString.ts"</span><span class="token punctuation">,</span> js<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>This config watches for changes and builds the app into a single <code class="language-unknown">index.html</code> file that we next write into a file named <code class="language-unknown">htmlString.ts</code> so we can import it into react-native.</p>
<p>Now we can run:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token parameter variable">-w</span><span class="token operator">=</span>lexical-editor run build
</code></pre></div>
<p>And vite will build the web editor on every change.</p>
<p>Also, we need to build the app on install:</p>
<div class="remark-highlight"><pre class="language-diff-json  diff-highlight"><code class="language-diff-json"><span class="token unchanged language-json"><span class="token prefix unchanged"> </span>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token prefix unchanged"> </span>    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"vite"</span><span class="token punctuation">,</span>
<span class="token prefix unchanged"> </span>    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"tsc &#x26;&#x26; vite build"</span><span class="token punctuation">,</span>
</span><span class="token inserted-sign inserted language-json"><span class="token prefix inserted">+</span>    <span class="token property">"prepare"</span><span class="token operator">:</span> <span class="token string">"npm run build -- --no-watch"</span><span class="token punctuation">,</span></span>
</code></pre></div>
<p>Only now we can import the output of the web app into react-native-webview:</p>
<div class="remark-highlight"><pre class="language-diff-tsx  diff-highlight"><code class="language-diff-tsx"><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">StyleSheet</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Text</span><span class="token punctuation">,</span> <span class="token maybe-class-name">View</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"react-native"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">WebView</span></span> <span class="token keyword">from</span> <span class="token string">"react-native-webview"</span><span class="token punctuation">;</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span><span class="token keyword">import</span> <span class="token imports">htmlString</span> <span class="token keyword">from</span> <span class="token string">"./lexical-editor/dist/htmlString"</span><span class="token punctuation">;</span>
</span>
<span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token prefix unchanged"> </span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>
<span class="token prefix unchanged"> </span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">Lexical Webview</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span>
<span class="token prefix unchanged"> </span>        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">WebView</span>
<span class="token prefix unchanged"> </span>          originWhitelist<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</span><span class="token deleted-sign deleted language-tsx"><span class="token prefix deleted">-</span>          source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> uri<span class="token operator">:</span> <span class="token string">"https://playground.lexical.dev"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>          source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> html<span class="token operator">:</span> htmlString <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginTop<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token prefix unchanged"> </span>        <span class="token operator">/</span><span class="token operator">></span>
<span class="token prefix unchanged"> </span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span></span>
</code></pre></div>
<p><img src="lexical-vite-webview.png#small" alt="lexical-vite-webview"></p>
<h2>Create a basic lexical editor</h2>
<p>Following <a href="https://lexical.dev/docs/getting-started/react">https://lexical.dev/docs/getting-started/react</a></p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token parameter variable">-w</span><span class="token operator">=</span>lexical-editor <span class="token function">install</span> <span class="token parameter variable">--save</span> lexical @lexical/react
</code></pre></div>
<p>We can create a basic lexical editor:</p>
<div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// lexical-editor/src/Editor.tsx</span>
<span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">LexicalComposer</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalComposer"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">PlainTextPlugin</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalPlainTextPlugin"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">ContentEditable</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalContentEditable"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">HistoryPlugin</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalHistoryPlugin"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">LexicalErrorBoundary</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalErrorBoundary"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">"./Editor.css"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">onError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Editor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> initialConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    namespace<span class="token operator">:</span> <span class="token string">"MyEditor"</span><span class="token punctuation">,</span>
    onError<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">LexicalComposer</span></span> <span class="token attr-name">initialConfig</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>initialConfig<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>editor-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">PlainTextPlugin</span></span>
          <span class="token attr-name">contentEditable</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">ContentEditable</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>editor-input<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span>
          <span class="token attr-name">placeholder</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>editor-placeholder<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">Enter some text...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
          <span class="token punctuation">}</span></span>
          <span class="token attr-name">ErrorBoundary</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token maybe-class-name">LexicalErrorBoundary</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span><span class="token plain-text"></span>
<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">HistoryPlugin</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">LexicalComposer</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p><img src="basic-lexical-editor.gif#small" alt="basic-lexical-editor"></p>
<h2>Message from WebView to React Native</h2>
<p>Let's add the <code class="language-unknown">OnChangePlugin</code> and post a message to react-native:</p>
<div class="remark-highlight"><pre class="language-diff-tsx  diff-highlight"><code class="language-diff-tsx"><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> $getRoot<span class="token punctuation">,</span> <span class="token maybe-class-name">EditorState</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"lexical"</span><span class="token punctuation">;</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">LexicalComposer</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalComposer"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">PlainTextPlugin</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalPlainTextPlugin"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">ContentEditable</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalContentEditable"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">HistoryPlugin</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalHistoryPlugin"</span><span class="token punctuation">;</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">OnChangePlugin</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalOnChangePlugin"</span><span class="token punctuation">;</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">LexicalErrorBoundary</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalErrorBoundary"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token string">"./Editor.css"</span><span class="token punctuation">;</span>
</span>
@@ -15,6 +17,22 @@ export function Editor() {
<span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>    onError<span class="token punctuation">,</span>
<span class="token prefix unchanged"> </span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span>
<span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>  <span class="token keyword">function</span> <span class="token function">onChange</span><span class="token punctuation">(</span>editorState<span class="token operator">:</span> <span class="token maybe-class-name">EditorState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>    editorState<span class="token punctuation">.</span><span class="token method function property-access">read</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>      <span class="token keyword">const</span> plainText <span class="token operator">=</span> <span class="token function">$getRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getTextContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>      <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>        type<span class="token operator">:</span> <span class="token string">"LEXICAL_EDITOR_STATE_CHANGE"</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>        payload<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>          plainText<span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>          serializedEditorState<span class="token operator">:</span> editorState<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>      <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactNativeWebView</span></span><span class="token operator">?.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>  <span class="token punctuation">}</span>
<span class="token prefix inserted">+</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>
<span class="token prefix unchanged"> </span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">LexicalComposer</span></span> <span class="token attr-name">initialConfig</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>initialConfig<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
<span class="token prefix unchanged"> </span>      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>editor-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
<span class="token prefix unchanged"> </span></span></span>@@ -26,6 +44,7 @@ export function Editor() {
<span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>          <span class="token maybe-class-name">ErrorBoundary</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token maybe-class-name">LexicalErrorBoundary</span><span class="token punctuation">}</span>
<span class="token prefix unchanged"> </span>        <span class="token operator">/</span><span class="token operator">></span>
<span class="token prefix unchanged"> </span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">HistoryPlugin</span></span> <span class="token punctuation">/></span></span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">OnChangePlugin</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token prefix unchanged"> </span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">LexicalComposer</span></span><span class="token punctuation">></span></span>
<span class="token prefix unchanged"> </span>  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
</code></pre></div>
<p>Ok, now we can receive this message on the react-native side:</p>
<div class="remark-highlight"><pre class="language-diff-tsx  diff-highlight"><code class="language-diff-tsx"><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">StyleSheet</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Text</span><span class="token punctuation">,</span> <span class="token maybe-class-name">View</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"react-native"</span><span class="token punctuation">;</span>
</span><span class="token deleted-sign deleted language-tsx"><span class="token prefix deleted">-</span><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">WebView</span></span> <span class="token keyword">from</span> <span class="token string">"react-native-webview"</span><span class="token punctuation">;</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">WebView</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">WebViewMessageEvent</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"react-native-webview"</span><span class="token punctuation">;</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports">htmlString</span> <span class="token keyword">from</span> <span class="token string">"./lexical-editor/dist/htmlString"</span><span class="token punctuation">;</span>
</span>
<span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>  <span class="token keyword">function</span> <span class="token function">onMessage</span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token maybe-class-name">WebViewMessageEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">nativeEvent</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>  <span class="token punctuation">}</span>
<span class="token prefix inserted">+</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>
<span class="token prefix unchanged"> </span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span><span class="token property-access">container</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
<span class="token prefix unchanged"> </span>      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token string">"80%"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
<span class="token prefix unchanged"> </span>        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">Lexical Webview</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">
<span class="token prefix unchanged"> </span>        &#x3C;WebView
<span class="token prefix unchanged"> </span>          originWhitelist=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token plain-text">
<span class="token prefix unchanged"> </span></span></span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>          onMessage<span class="token operator">=</span><span class="token punctuation">{</span>onMessage<span class="token punctuation">}</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>          source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> html<span class="token operator">:</span> htmlString <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token prefix unchanged"> </span>          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginTop<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token prefix unchanged"> </span>        <span class="token operator">/</span><span class="token operator">></span></span>
</code></pre></div>
<p>When we type something in the WebView editor we receive:</p>
<div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"LEXICAL_EDITOR_STATE_CHANGE"</span><span class="token punctuation">,</span>
  <span class="token property">"payload"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"plainText"</span><span class="token operator">:</span> <span class="token string">"Hi"</span><span class="token punctuation">,</span>
    <span class="token property">"serializedEditorState"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"root"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                <span class="token property">"detail"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">"format"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
                <span class="token property">"style"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
                <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Hi"</span><span class="token punctuation">,</span>
                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span>
                <span class="token property">"version"</span><span class="token operator">:</span> <span class="token number">1</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"direction"</span><span class="token operator">:</span> <span class="token string">"ltr"</span><span class="token punctuation">,</span>
            <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token property">"indent"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"paragraph"</span><span class="token punctuation">,</span>
            <span class="token property">"version"</span><span class="token operator">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"direction"</span><span class="token operator">:</span> <span class="token string">"ltr"</span><span class="token punctuation">,</span>
        <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
        <span class="token property">"indent"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"root"</span><span class="token punctuation">,</span>
        <span class="token property">"version"</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>We can do a switch on <code class="language-unknown">message.type</code> and handle any messages:</p>
<div class="remark-highlight"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">onMessage</span><span class="token punctuation">(</span>event<span class="token operator">:</span> WebViewMessageEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"LEXICAL_EDITOR_STATE_CHANGE"</span><span class="token operator">:</span>
      <span class="token comment">// Do something with the editor state</span>
      <span class="token comment">// like saving it to a database</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Unknown message type"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h2>Command from React Native to Webview</h2>
<p>Let's say, we want to initialize the editor state when it is mounted.</p>
<p>We listen for <code class="language-unknown">LEXICAL_EDITOR_READY</code> message and post a message to webview using WebView ref.</p>
<div class="remark-highlight"><pre class="language-diff-tsx  diff-highlight"><code class="language-diff-tsx">...
<span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> useRef <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
</span>
<span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>  <span class="token keyword">const</span> webviewRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&#x3C;</span>WebView<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>  <span class="token keyword">function</span> <span class="token function">onMessage</span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token maybe-class-name">WebViewMessageEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token prefix unchanged"> </span>    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">nativeEvent</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span>    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span>    <span class="token spread operator">...</span>
<span class="token prefix unchanged"> </span>        <span class="token comment">// Do something with the editor state</span>
<span class="token prefix unchanged"> </span>        <span class="token comment">// like saving it to a database</span>
<span class="token prefix unchanged"> </span>        <span class="token keyword">break</span><span class="token punctuation">;</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>      <span class="token keyword">case</span> <span class="token string">"LEXICAL_EDITOR_READY"</span><span class="token operator">:</span>
<span class="token prefix inserted">+</span>        <span class="token keyword">const</span> commandMessage <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>          command<span class="token operator">:</span> <span class="token string">"INIT_SERIALIZED_EDITOR_STATE"</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>          payload<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>            root<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>              children<span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token prefix inserted">+</span>                <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>                  children<span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token prefix inserted">+</span>                    <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>                      detail<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                      format<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                      mode<span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                      style<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                      text<span class="token operator">:</span> <span class="token string">"Initial text"</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                      type<span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                      version<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                  direction<span class="token operator">:</span> <span class="token string">"ltr"</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                  format<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                  indent<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                  type<span class="token operator">:</span> <span class="token string">"paragraph"</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                  version<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>              direction<span class="token operator">:</span> <span class="token string">"ltr"</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>              format<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>              indent<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>              type<span class="token operator">:</span> <span class="token string">"root"</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>              version<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>        webviewRef<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token operator">?.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>commandMessage<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>      <span class="token keyword">default</span><span class="token operator">:</span>
<span class="token prefix unchanged"> </span>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">"Unknown message type"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span>    <span class="token punctuation">}</span>
<span class="token prefix unchanged"> </span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token string">"80%"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
<span class="token prefix unchanged"> </span>        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">Lexical Webview</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">
<span class="token prefix unchanged"> </span>        &#x3C;WebView
<span class="token prefix unchanged"> </span></span></span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>          ref<span class="token operator">=</span><span class="token punctuation">{</span>webviewRef<span class="token punctuation">}</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>          originWhitelist<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token prefix unchanged"> </span>          onMessage<span class="token operator">=</span><span class="token punctuation">{</span>onMessage<span class="token punctuation">}</span>
<span class="token prefix unchanged"> </span>          source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> html<span class="token operator">:</span> htmlString <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</code></pre></div>
<p>Now we need to handle this in Lexical editor. We can create a custom plugin.</p>
<div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> useLexicalComposerContext <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalComposerContext"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">EditorStateInitPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>editor<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useLexicalComposerContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">"LEXICAL_EDITOR_READY"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactNativeWebView</span></span><span class="token operator">?.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">listener</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token maybe-class-name">MessageEvent</span><span class="token operator">&#x3C;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token property-access">command</span> <span class="token operator">===</span> <span class="token string">"INIT_SERIALIZED_EDITOR_STATE"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        editor<span class="token punctuation">.</span><span class="token method function property-access">setEditorState</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token method function property-access">parseEditorState</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token property-access">payload</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          tag<span class="token operator">:</span> <span class="token string">"FromReactNativeToLexical"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>editor<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p>And use it in our <code class="language-unknown">Editor.tsx</code>:</p>
<div class="remark-highlight"><pre class="language-diff-tsx  diff-highlight"><code class="language-diff-tsx"><span class="token deleted-sign deleted language-tsx"><span class="token prefix deleted">-</span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> $getRoot<span class="token punctuation">,</span> <span class="token maybe-class-name">EditorState</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"lexical"</span><span class="token punctuation">;</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> $getRoot<span class="token punctuation">,</span> <span class="token maybe-class-name">EditorState</span><span class="token punctuation">,</span> <span class="token maybe-class-name">LexicalEditor</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"lexical"</span><span class="token punctuation">;</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">LexicalComposer</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalComposer"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">PlainTextPlugin</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalPlainTextPlugin"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">ContentEditable</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalContentEditable"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">HistoryPlugin</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalHistoryPlugin"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">OnChangePlugin</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalOnChangePlugin"</span><span class="token punctuation">;</span>
<span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">LexicalErrorBoundary</span></span> <span class="token keyword">from</span> <span class="token string">"@lexical/react/LexicalErrorBoundary"</span><span class="token punctuation">;</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">EditorStateInitPlugin</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"./plugins/EditorStateInitPlugin"</span><span class="token punctuation">;</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span><span class="token keyword">import</span> <span class="token string">"./Editor.css"</span><span class="token punctuation">;</span>
</span>
...

<span class="token deleted-sign deleted language-tsx"><span class="token prefix deleted">-</span>  <span class="token keyword">function</span> <span class="token function">onChange</span><span class="token punctuation">(</span>editorState<span class="token operator">:</span> <span class="token maybe-class-name">EditorState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>  <span class="token keyword">function</span> <span class="token function">onChange</span><span class="token punctuation">(</span>
<span class="token prefix inserted">+</span>    editorState<span class="token operator">:</span> <span class="token maybe-class-name">EditorState</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>    _latestEditor<span class="token operator">:</span> <span class="token maybe-class-name">LexicalEditor</span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>    tags<span class="token operator">:</span> <span class="token known-class-name class-name">Set</span><span class="token operator">&#x3C;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span>
<span class="token prefix inserted">+</span>  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tags<span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span><span class="token string">"FromReactNativeToLexical"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token prefix inserted">+</span>      <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token prefix inserted">+</span>    <span class="token punctuation">}</span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>    editorState<span class="token punctuation">.</span><span class="token method function property-access">read</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
<span class="token prefix unchanged"> </span>      <span class="token keyword">const</span> plainText <span class="token operator">=</span> <span class="token function">$getRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getTextContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span>
...

<span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>          <span class="token maybe-class-name">ErrorBoundary</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token maybe-class-name">LexicalErrorBoundary</span><span class="token punctuation">}</span>
<span class="token prefix unchanged"> </span>        <span class="token operator">/</span><span class="token operator">></span>
<span class="token prefix unchanged"> </span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">HistoryPlugin</span></span> <span class="token punctuation">/></span></span>
</span><span class="token inserted-sign inserted language-tsx"><span class="token prefix inserted">+</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">EditorStateInitPlugin</span></span> <span class="token punctuation">/></span></span>
</span><span class="token unchanged language-tsx"><span class="token prefix unchanged"> </span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">OnChangePlugin</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
<span class="token prefix unchanged"> </span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token prefix unchanged"> </span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">LexicalComposer</span></span><span class="token punctuation">></span></span></span>
</code></pre></div>
<p>Let's see it in action:</p>
<p><img src="lexical-initial-state.gif#small" alt="lexical-initial-state"></p>
<h2>What's next?</h2>
<p>Now you can add the desired nodes and plugins into editor. Also, add new messages and commands for communication between React Native and Lexical editor in WebView.</p>
<p>For the full code example, you can check the playground project on GitHub, <a href="https://github.com/Planable/react-native-lexical">react-native-lexical</a>.</p>
</div><footer class="PostFooter_footer__nLJ4b">Liked this post? Follow me<!-- --> <a target="_blank" href="http://twitter.com/strdr4605" rel="noreferrer">@strdr4605</a> <!-- -->to get more updates.</footer></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"title":"How to set up Lexical editor in React Native","date":"2024-02-21T00:00:00.000Z","description":"We will look at how to build a rich text editor in React Native using lexical editor, with the help of react-native-webview.","tags":["react-native"],"slug":"how-to-set-up-lexical-editor-in-react-native","contentHtml":"\u003cp\u003eSo you have a web app that uses Lexical editor and now you want to build the same editor on React Native, or maybe you just want to build a rich text editor in React Native using Lexical.\nBut unfortunately lexical does not \u003ca href=\"https://github.com/facebook/lexical/discussions/2410\"\u003esupport React Native\u003c/a\u003e at the moment.\u003c/p\u003e\n\u003cp\u003eSo the idea that comes to mind is to try Lexical editor in a react-native-webview. There are similar solutions like \u003ca href=\"https://github.com/imnapo/react-native-cn-quill\"\u003ereact-native-cn-quill\u003c/a\u003e and \u003ca href=\"https://github.com/wxik/react-native-rich-editor\"\u003ereact-native-rich-editor\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eBut as \u003ca href=\"https://docs.expo.dev/guides/editing-richtext/#custom-webview-based-editor\"\u003eexpo docs\u003c/a\u003e say:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf you need more configurability, you can build a similar library with an existing web-only editor.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSo let's implement a lexical editor in an Expo app.\u003cbr\u003e\n(This is a demo project but you can follow the steps to add the editor to an existing React Native app)\u003c/p\u003e\n\u003ch2\u003eCreate the expo app\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003enpx create-expo-app \u003cspan class=\"token parameter variable\"\u003e-t\u003c/span\u003e expo-template-blank-typescript\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow let's install \u003ccode class=\"language-unknown\"\u003ereact-native-webview\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e i react-native-webview\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eAnd make some changes in \u003ccode class=\"language-unknown\"\u003eApp.tsx\u003c/code\u003e, to display the WebView with \u003ca href=\"https://playground.lexical.dev/\"\u003ehttps://playground.lexical.dev/\u003c/a\u003e (for now).\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx\"\u003e\u003ccode class=\"language-tsx\"\u003e\u003cspan class=\"token comment\"\u003e// ./App.tsx\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eStyleSheet\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eText\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eView\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react-native\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eWebView\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react-native-webview\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eView\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003estyles\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003econtainer\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e      \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eView\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e width\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"100%\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e height\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"80%\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e        \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eText\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003eLexical Webview\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eText\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e        \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eWebView\u003c/span\u003e\u003c/span\u003e\n          \u003cspan class=\"token attr-name\"\u003esource\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e uri\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"https://playground.lexical.dev\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\n          \u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e marginTop\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e      \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eView\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e    \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eView\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e styles \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eStyleSheet\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecreate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  container\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    flex\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    backgroundColor\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"#e0e0e0\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    alignItems\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"center\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    justifyContent\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"center\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWe should have this result:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"expo-webview-init.png#small\" alt=\"expo-webview-init\"\u003e\u003c/p\u003e\n\u003ch2\u003eAdd lexical editor\u003c/h2\u003e\n\u003cp\u003eOther implementations for a rich text editor in react-native give us a predefined editor. However, we want to create our custom lexical editor with custom nodes and logic. So the only option is to create the editor from scratch.\u003cbr\u003e\nHow? By creating a new app inside the project using \u003ca href=\"https://docs.npmjs.com/cli/v7/using-npm/workspaces\"\u003enpm workspaces\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eWe add a workspace to \u003ccode class=\"language-unknown\"\u003epackage.json\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff-json  diff-highlight\"\u003e\u003ccode class=\"language-diff-json\"\u003e\u003cspan class=\"token unchanged language-json\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token property\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react-native-lexical\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token property\"\u003e\"version\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"1.0.0\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token property\"\u003e\"main\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"node_modules/expo/AppEntry.js\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-json\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e  \u003cspan class=\"token property\"\u003e\"workspaces\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    \u003cspan class=\"token string\"\u003e\"lexical-editor\"\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-json\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token property\"\u003e\"scripts\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token property\"\u003e\"start\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"expo start\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token property\"\u003e\"android\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"expo start --android\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWe can name it how we want \u003ccode class=\"language-unknown\"\u003epost-editor\u003c/code\u003e, \u003ccode class=\"language-unknown\"\u003epage-editor\u003c/code\u003e. Also we can have multiple editors if needed.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3\u003eCreate web app as npm workspace\u003c/h3\u003e\n\u003cp\u003eFor this, we will use \u003ca href=\"https://vitejs.dev/\"\u003evite\u003c/a\u003e.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e create vite@latest lexical-editor -- \u003cspan class=\"token parameter variable\"\u003e--template\u003c/span\u003e react-ts\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eLet's do a cleanup and some changes in lexical-editor app.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003elexical-editor\n├── README.md\n├── index.html\n├── package.json\n├── src\n│   ├── App.tsx\n│   ├── index.css\n│   ├── main.tsx\n│   └── vite-env.d.ts\n├── tsconfig.json\n├── tsconfig.node.json\n└── vite.config.ts\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eImportant to not enable zoom in the WebView, add this to \u003ccode class=\"language-unknown\"\u003eindex.html\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003emeta\u003c/span\u003e\n  \u003cspan class=\"token attr-name\"\u003ename\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eviewport\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token attr-name\"\u003econtent\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ewidth=device-width, initial-scale=1, maximum-scale=0.99, user-scalable=0\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow we can run the web app:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# in the root of expo app, we run script from lexical-editor workspace\u003c/span\u003e\n\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e--workspace\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003elexical-editor run dev\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eAnd we can see this in the browser:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"lexical-vite-init.png\" alt=\"lexical-vite-init\"\u003e\u003c/p\u003e\n\u003cp\u003eCool, now how can we put this into \u003ccode class=\"language-unknown\"\u003ereact-native-webview\u003c/code\u003e?!\u003c/p\u003e\n\u003ch3\u003eBuild a web app for react-native-webview\u003c/h3\u003e\n\u003cp\u003eFor this, we need some vite plugins that will build the app into a single file that we will import into react-native-webview.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e-w\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003elexical-editor i \u003cspan class=\"token parameter variable\"\u003e-D\u003c/span\u003e vite-plugin-singlefile\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eand let's change the \u003ccode class=\"language-unknown\"\u003evite.config.ts\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token comment\"\u003e// .lexical-editor/vite.config.ts\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e fs \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"fs\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e defineConfig \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"vite\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e viteSingleFile \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"vite-plugin-singlefile\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e react \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@vitejs/plugin-react\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// https://vitejs.dev/config/\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token function\"\u003edefineConfig\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  build\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    watch\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      include\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"src/**\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      buildDelay\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e500\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  plugins\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003ereact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eviteSingleFile\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"vite-plugin-html-string\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token function\"\u003ecloseBundle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e bundle \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e fs\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ereadFileSync\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"dist/index.html\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"utf8\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e escaped \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estringify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ebundle\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e js \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003eexport default \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003eescaped\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        fs\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ewriteFileSync\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"dist/htmlString.ts\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e js\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis config watches for changes and builds the app into a single \u003ccode class=\"language-unknown\"\u003eindex.html\u003c/code\u003e file that we next write into a file named \u003ccode class=\"language-unknown\"\u003ehtmlString.ts\u003c/code\u003e so we can import it into react-native.\u003c/p\u003e\n\u003cp\u003eNow we can run:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e-w\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003elexical-editor run build\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eAnd vite will build the web editor on every change.\u003c/p\u003e\n\u003cp\u003eAlso, we need to build the app on install:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff-json  diff-highlight\"\u003e\u003ccode class=\"language-diff-json\"\u003e\u003cspan class=\"token unchanged language-json\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token property\"\u003e\"scripts\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token property\"\u003e\"dev\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"vite\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token property\"\u003e\"build\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"tsc \u0026#x26;\u0026#x26; vite build\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-json\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    \u003cspan class=\"token property\"\u003e\"prepare\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"npm run build -- --no-watch\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eOnly now we can import the output of the web app into react-native-webview:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff-tsx  diff-highlight\"\u003e\u003ccode class=\"language-diff-tsx\"\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eStyleSheet\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eText\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eView\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react-native\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eWebView\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react-native-webview\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003ehtmlString\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./lexical-editor/dist/htmlString\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\n\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eText\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003eLexical Webview\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eText\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eWebView\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          originWhitelist\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"*\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token deleted-sign deleted language-tsx\"\u003e\u003cspan class=\"token prefix deleted\"\u003e-\u003c/span\u003e          source\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e uri\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"https://playground.lexical.dev\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e          source\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e html\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e htmlString \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          style\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e marginTop\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e      \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eView\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"lexical-vite-webview.png#small\" alt=\"lexical-vite-webview\"\u003e\u003c/p\u003e\n\u003ch2\u003eCreate a basic lexical editor\u003c/h2\u003e\n\u003cp\u003eFollowing \u003ca href=\"https://lexical.dev/docs/getting-started/react\"\u003ehttps://lexical.dev/docs/getting-started/react\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e-w\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003elexical-editor \u003cspan class=\"token function\"\u003einstall\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e--save\u003c/span\u003e lexical @lexical/react\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWe can create a basic lexical editor:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx\"\u003e\u003ccode class=\"language-tsx\"\u003e\u003cspan class=\"token comment\"\u003e// lexical-editor/src/Editor.tsx\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eLexicalComposer\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalComposer\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003ePlainTextPlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalPlainTextPlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eContentEditable\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalContentEditable\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eHistoryPlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalHistoryPlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eLexicalErrorBoundary\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalErrorBoundary\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./Editor.css\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eonError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eerror\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eunknown\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eerror\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eerror\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eEditor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e initialConfig \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    namespace\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"MyEditor\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    onError\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eLexicalComposer\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003einitialConfig\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003einitialConfig\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e      \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclassName\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eeditor-container\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e        \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003ePlainTextPlugin\u003c/span\u003e\u003c/span\u003e\n          \u003cspan class=\"token attr-name\"\u003econtentEditable\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eContentEditable\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclassName\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eeditor-input\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\n          \u003cspan class=\"token attr-name\"\u003eplaceholder\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclassName\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eeditor-placeholder\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003eEnter some text...\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n          \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\n          \u003cspan class=\"token attr-name\"\u003eErrorBoundary\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eLexicalErrorBoundary\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e        \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eHistoryPlugin\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e      \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\u003c/span\u003e\n\u003cspan class=\"token plain-text\"\u003e    \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eLexicalComposer\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"basic-lexical-editor.gif#small\" alt=\"basic-lexical-editor\"\u003e\u003c/p\u003e\n\u003ch2\u003eMessage from WebView to React Native\u003c/h2\u003e\n\u003cp\u003eLet's add the \u003ccode class=\"language-unknown\"\u003eOnChangePlugin\u003c/code\u003e and post a message to react-native:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff-tsx  diff-highlight\"\u003e\u003ccode class=\"language-diff-tsx\"\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e $getRoot\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eEditorState\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"lexical\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eLexicalComposer\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalComposer\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003ePlainTextPlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalPlainTextPlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eContentEditable\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalContentEditable\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eHistoryPlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalHistoryPlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eOnChangePlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalOnChangePlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eLexicalErrorBoundary\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalErrorBoundary\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./Editor.css\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\n@@ -15,6 +17,22 @@ export function Editor() {\n\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    onError\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\n\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e  \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eonChange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eeditorState\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eEditorState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    editorState\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e      \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e plainText \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003e$getRoot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetTextContent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e      \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e message \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e        type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"LEXICAL_EDITOR_STATE_CHANGE\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e        payload\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e          plainText\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e          serializedEditorState\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e editorState\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etoJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e      \u003cspan class=\"token dom variable\"\u003ewindow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eReactNativeWebView\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epostMessage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003estringify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emessage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eLexicalComposer\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003einitialConfig\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003einitialConfig\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e      \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclassName\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eeditor-container\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e@@ -26,6 +44,7 @@ export function Editor() {\n\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          \u003cspan class=\"token maybe-class-name\"\u003eErrorBoundary\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eLexicalErrorBoundary\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eHistoryPlugin\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e        \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eOnChangePlugin\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eonChange\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eonChange\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e      \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eLexicalComposer\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eOk, now we can receive this message on the react-native side:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff-tsx  diff-highlight\"\u003e\u003ccode class=\"language-diff-tsx\"\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eStyleSheet\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eText\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eView\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react-native\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token deleted-sign deleted language-tsx\"\u003e\u003cspan class=\"token prefix deleted\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eWebView\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react-native-webview\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eWebView\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eWebViewMessageEvent\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react-native-webview\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003ehtmlString\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./lexical-editor/dist/htmlString\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\n\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e  \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eonMessage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eWebViewMessageEvent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e message \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003enativeEvent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003edata\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003estringify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emessage\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eView\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003estyles\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003econtainer\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e      \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eView\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e width\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"100%\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e height\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"80%\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eText\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003eLexical Webview\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eText\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u0026#x3C;WebView\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          originWhitelist=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"*\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e          onMessage\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eonMessage\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          source\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e html\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e htmlString \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          style\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e marginTop\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWhen we type something in the WebView editor we receive:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"LEXICAL_EDITOR_STATE_CHANGE\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"payload\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"plainText\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Hi\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"serializedEditorState\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003e\"root\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"children\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n          \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token property\"\u003e\"children\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n              \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token property\"\u003e\"detail\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token property\"\u003e\"format\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token property\"\u003e\"mode\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"normal\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token property\"\u003e\"style\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token property\"\u003e\"text\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Hi\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token property\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"text\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token property\"\u003e\"version\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n              \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"token property\"\u003e\"direction\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"ltr\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"token property\"\u003e\"format\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"token property\"\u003e\"indent\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"token property\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"paragraph\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"token property\"\u003e\"version\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n          \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"direction\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"ltr\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"format\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"indent\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"root\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"version\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWe can do a switch on \u003ccode class=\"language-unknown\"\u003emessage.type\u003c/code\u003e and handle any messages:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eonMessage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e WebViewMessageEvent\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e message \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enativeEvent\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edata\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estringify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emessage\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003eswitch\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emessage\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etype\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"LEXICAL_EDITOR_STATE_CHANGE\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e// Do something with the editor state\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e// like saving it to a database\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ebreak\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eerror\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Unknown message type\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e message\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eCommand from React Native to Webview\u003c/h2\u003e\n\u003cp\u003eLet's say, we want to initialize the editor state when it is mounted.\u003c/p\u003e\n\u003cp\u003eWe listen for \u003ccode class=\"language-unknown\"\u003eLEXICAL_EDITOR_READY\u003c/code\u003e message and post a message to webview using WebView ref.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff-tsx  diff-highlight\"\u003e\u003ccode class=\"language-diff-tsx\"\u003e...\n\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useRef \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\n\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e webviewRef \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token generic-function\"\u003e\u003cspan class=\"token function\"\u003euseRef\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eWebView\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e  \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eonMessage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eWebViewMessageEvent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e message \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003enativeEvent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003edata\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003estringify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emessage\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token comment\"\u003e// Do something with the editor state\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token comment\"\u003e// like saving it to a database\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token keyword\"\u003ebreak\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e      \u003cspan class=\"token keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"LEXICAL_EDITOR_READY\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e        \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e commandMessage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e          command\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"INIT_SERIALIZED_EDITOR_STATE\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e          payload\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e            root\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e              children\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                  children\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                      detail\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                      format\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                      mode\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"normal\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                      style\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                      text\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Initial text\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                      type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"text\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                      version\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                  \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                  direction\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"ltr\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                  format\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                  indent\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                  type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"paragraph\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                  version\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e                \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e              \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e              direction\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"ltr\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e              format\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e              indent\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e              type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"root\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e              version\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e          \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e        webviewRef\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecurrent\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epostMessage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003estringify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecommandMessage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e        \u003cspan class=\"token keyword\"\u003ebreak\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e      \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eerror\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Unknown message type\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e message\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e      \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eView\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e width\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"100%\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e height\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"80%\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eText\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003eLexical Webview\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eText\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u0026#x3C;WebView\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e          ref\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ewebviewRef\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          originWhitelist\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"*\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          onMessage\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eonMessage\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          source\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e html\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e htmlString \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow we need to handle this in Lexical editor. We can create a custom plugin.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx\"\u003e\u003ccode class=\"language-tsx\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useEffect \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"react\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useLexicalComposerContext \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalComposerContext\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003eEditorStateInitPlugin\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eeditor\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseLexicalComposerContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token function\"\u003euseEffect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e message \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"LEXICAL_EDITOR_READY\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token dom variable\"\u003ewindow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eReactNativeWebView\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epostMessage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003estringify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emessage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token function\"\u003euseEffect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003elistener\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eMessageEvent\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e message \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003edata\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n      \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emessage\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecommand\u003c/span\u003e \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"INIT_SERIALIZED_EDITOR_STATE\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        editor\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esetEditorState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eeditor\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eparseEditorState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emessage\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003epayload\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          tag\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"FromReactNativeToLexical\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token dom variable\"\u003ewindow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eaddEventListener\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"message\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e listener\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token dom variable\"\u003ewindow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eremoveEventListener\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"message\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e listener\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eeditor\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eAnd use it in our \u003ccode class=\"language-unknown\"\u003eEditor.tsx\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff-tsx  diff-highlight\"\u003e\u003ccode class=\"language-diff-tsx\"\u003e\u003cspan class=\"token deleted-sign deleted language-tsx\"\u003e\u003cspan class=\"token prefix deleted\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e $getRoot\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eEditorState\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"lexical\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e $getRoot\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eEditorState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eLexicalEditor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"lexical\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eLexicalComposer\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalComposer\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003ePlainTextPlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalPlainTextPlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eContentEditable\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalContentEditable\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eHistoryPlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalHistoryPlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eOnChangePlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalOnChangePlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eLexicalErrorBoundary\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@lexical/react/LexicalErrorBoundary\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eEditorStateInitPlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./plugins/EditorStateInitPlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./Editor.css\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\n...\n\n\u003cspan class=\"token deleted-sign deleted language-tsx\"\u003e\u003cspan class=\"token prefix deleted\"\u003e-\u003c/span\u003e  \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eonChange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eeditorState\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eEditorState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e  \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eonChange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    editorState\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eEditorState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    _latestEditor\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eLexicalEditor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    tags\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eSet\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etags\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ehas\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"FromReactNativeToLexical\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e      \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    editorState\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e      \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e plainText \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003e$getRoot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetTextContent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\n...\n\n\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e          \u003cspan class=\"token maybe-class-name\"\u003eErrorBoundary\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eLexicalErrorBoundary\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eHistoryPlugin\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted language-tsx\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e        \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEditorStateInitPlugin\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"token unchanged language-tsx\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e        \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eOnChangePlugin\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eonChange\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eonChange\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e      \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eLexicalComposer\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eLet's see it in action:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"lexical-initial-state.gif#small\" alt=\"lexical-initial-state\"\u003e\u003c/p\u003e\n\u003ch2\u003eWhat's next?\u003c/h2\u003e\n\u003cp\u003eNow you can add the desired nodes and plugins into editor. Also, add new messages and commands for communication between React Native and Lexical editor in WebView.\u003c/p\u003e\n\u003cp\u003eFor the full code example, you can check the playground project on GitHub, \u003ca href=\"https://github.com/Planable/react-native-lexical\"\u003ereact-native-lexical\u003c/a\u003e.\u003c/p\u003e\n"},"_superjson":{"values":{"postData.date":["Date"]}}},"__N_SSG":true},"page":"/[postSlug]","query":{"postSlug":"how-to-set-up-lexical-editor-in-react-native"},"buildId":"NEp106YUfFAK-NwTELFCE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>