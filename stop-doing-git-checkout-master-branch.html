<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Stop doing git checkout master branch</title><meta name="description" content="My workflow when starting a new task for the project with git. How I checkout on a new branch based on origin/master branch."/><meta property="og:title" content="Stop doing git checkout master branch"/><meta property="og:description" content="My workflow when starting a new task for the project with git. How I checkout on a new branch based on origin/master branch."/><meta property="og:image" content="https://strdr4605.com/stop-doing-git-checkout-master-branch.jpg"/><meta property="og:type" content="article"/><link rel="canonical" href="https://strdr4605.com/stop-doing-git-checkout-master-branch"/><meta name="next-head-count" content="9"/><meta charSet="UTF-8"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><meta property="og:locale" content="en_GB"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@strdr4605"/><meta name="theme-color" content="#FAF181"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-171697116-1"></script><script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){dataLayer.push(arguments);}
                    gtag('js', new Date());

                    gtag('config', 'UA-171697116-1', {
                      page_path: window.location.pathname,
                    });
                  </script><link rel="preload" href="/_next/static/css/83a77daccbc30077.css" as="style"/><link rel="stylesheet" href="/_next/static/css/83a77daccbc30077.css" data-n-g=""/><link rel="preload" href="/_next/static/css/bc274fc7c99985a3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bc274fc7c99985a3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9e60bad828f3ecaa.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-e267bb9839e5051c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-960db24c14844c7a.js" defer=""></script><script src="/_next/static/chunks/453-0a4b1ae71b489eee.js" defer=""></script><script src="/_next/static/chunks/pages/%5BpostSlug%5D-2bfde3a588be30eb.js" defer=""></script><script src="/_next/static/jYrFetGvEqMrLd7L0Phnx/_buildManifest.js" defer=""></script><script src="/_next/static/jYrFetGvEqMrLd7L0Phnx/_ssgManifest.js" defer=""></script><script src="/_next/static/jYrFetGvEqMrLd7L0Phnx/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Layout_container__n__U4"><article><h1>Stop doing git checkout master branch</h1><i><time dateTime="2023-03-13">13 Mar 2023</time></i> on <a href="/"><span>Dragoș Străinu</span>&#x27;s blog</a><br/><div><p>I see a common workflow when starting to work on new task:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> checkout master
<span class="token function">git</span> pull <span class="token comment"># or git pull -r</span>
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> feat/4605-new-task
</code></pre></div>
<p>But I do things a bit differently. The main difference is that I don't care about the local <code>master</code> branch because the source of truth is always remote <code>origin/master</code>.
I don't do commits on <code>master</code> branch, because all changes to the project are done through Pull Requests. So why should I keep the local <code>master</code> in sync with <code>origin/master</code>?</p>
<p>You can do:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> fetch <span class="token comment"># get latest updates from origin/master</span>
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> feat/4605-new-task origin/master <span class="token comment"># --no-track</span>
</code></pre></div>
<p>And here is my workflow:</p>
<p>The first thing I do is fetch the remote master branch to get the latest commits.</p>
<p>I have an alias in my <code>.gitconfig</code> file:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span>alias<span class="token punctuation">]</span>
  fetch-and-clean-branches <span class="token operator">=</span> <span class="token string">"!git fetch -p &#x26;&#x26; git branch -vv | grep ': gone]'|  grep -v "</span><span class="token punctuation">\</span><span class="token punctuation">\</span>*<span class="token string">" | awk '{ print <span class="token variable">$1</span>; }' | xargs git branch -D"</span>
</code></pre></div>
<blockquote>
<p><a href="https://morgan.cugerone.com/blog/quick-tip-how-to-locally-delete-all-remotely-merged-git-branches/">How to locally delete all remotely merged git branches</a></p>
</blockquote>
<p>Running <code>git fetch-and-clean-branches</code>, will fetch new updates on remote branches and will remove local branches that are not relevant anymore.</p>
<p>Next, I create a new branch based on <code>origin/master</code>:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> checkout <span class="token parameter variable">-b</span> feat/4605-new-task origin/master <span class="token comment"># --no-track</span>
</code></pre></div>
<p>I also created an alias for this command:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span>alias<span class="token punctuation">]</span>
  fetch-and-clean-branches <span class="token operator">=</span> <span class="token string">"!git fetch -p &#x26;&#x26; git branch -vv | grep ': gone]'|  grep -v "</span><span class="token punctuation">\</span><span class="token punctuation">\</span>*<span class="token string">" | awk '{ print <span class="token variable">$1</span>; }' | xargs git branch -D"</span>
  start <span class="token operator">=</span> <span class="token string">"!git fetch-and-clean-branches &#x26;&#x26; git checkout -b <span title="\&#x22;" class="token entity">\"</span><span class="token variable">$1</span><span title="\&#x22;" class="token entity">\"</span> --no-track origin/master #"</span>
</code></pre></div>
<p>And I can use it as: <code>git start feat/4605-new-task</code>.</p>
<hr>
<blockquote>
<p>Related: <a href="/how-i-use-git">How I use Git</a></p>
</blockquote>
</div><footer class="PostFooter_footer__nLJ4b">Liked this post? Follow me<!-- --> <a target="_blank" href="http://twitter.com/strdr4605" rel="noreferrer">@strdr4605</a> <!-- -->to get more updates.</footer></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"title":"Stop doing git checkout master branch","date":"2023-03-13T00:00:00.000Z","description":"My workflow when starting a new task for the project with git. How I checkout on a new branch based on origin/master branch.","tags":["git"],"slug":"stop-doing-git-checkout-master-branch","contentHtml":"\u003cp\u003eI see a common workflow when starting to work on new task:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003egit\u003c/span\u003e checkout master\n\u003cspan class=\"token function\"\u003egit\u003c/span\u003e pull \u003cspan class=\"token comment\"\u003e# or git pull -r\u003c/span\u003e\n\u003cspan class=\"token function\"\u003egit\u003c/span\u003e checkout \u003cspan class=\"token parameter variable\"\u003e-b\u003c/span\u003e feat/4605-new-task\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eBut I do things a bit differently. The main difference is that I don't care about the local \u003ccode\u003emaster\u003c/code\u003e branch because the source of truth is always remote \u003ccode\u003eorigin/master\u003c/code\u003e.\nI don't do commits on \u003ccode\u003emaster\u003c/code\u003e branch, because all changes to the project are done through Pull Requests. So why should I keep the local \u003ccode\u003emaster\u003c/code\u003e in sync with \u003ccode\u003eorigin/master\u003c/code\u003e?\u003c/p\u003e\n\u003cp\u003eYou can do:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003egit\u003c/span\u003e fetch \u003cspan class=\"token comment\"\u003e# get latest updates from origin/master\u003c/span\u003e\n\u003cspan class=\"token function\"\u003egit\u003c/span\u003e checkout \u003cspan class=\"token parameter variable\"\u003e-b\u003c/span\u003e feat/4605-new-task origin/master \u003cspan class=\"token comment\"\u003e# --no-track\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eAnd here is my workflow:\u003c/p\u003e\n\u003cp\u003eThe first thing I do is fetch the remote master branch to get the latest commits.\u003c/p\u003e\n\u003cp\u003eI have an alias in my \u003ccode\u003e.gitconfig\u003c/code\u003e file:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ealias\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n  fetch-and-clean-branches \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"!git fetch -p \u0026#x26;\u0026#x26; git branch -vv | grep ': gone]'|  grep -v \"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e*\u003cspan class=\"token string\"\u003e\" | awk '{ print \u003cspan class=\"token variable\"\u003e$1\u003c/span\u003e; }' | xargs git branch -D\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://morgan.cugerone.com/blog/quick-tip-how-to-locally-delete-all-remotely-merged-git-branches/\"\u003eHow to locally delete all remotely merged git branches\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eRunning \u003ccode\u003egit fetch-and-clean-branches\u003c/code\u003e, will fetch new updates on remote branches and will remove local branches that are not relevant anymore.\u003c/p\u003e\n\u003cp\u003eNext, I create a new branch based on \u003ccode\u003eorigin/master\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003egit\u003c/span\u003e checkout \u003cspan class=\"token parameter variable\"\u003e-b\u003c/span\u003e feat/4605-new-task origin/master \u003cspan class=\"token comment\"\u003e# --no-track\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eI also created an alias for this command:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ealias\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n  fetch-and-clean-branches \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"!git fetch -p \u0026#x26;\u0026#x26; git branch -vv | grep ': gone]'|  grep -v \"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e*\u003cspan class=\"token string\"\u003e\" | awk '{ print \u003cspan class=\"token variable\"\u003e$1\u003c/span\u003e; }' | xargs git branch -D\"\u003c/span\u003e\n  start \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"!git fetch-and-clean-branches \u0026#x26;\u0026#x26; git checkout -b \u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$1\u003c/span\u003e\u003cspan title=\"\\\u0026#x22;\" class=\"token entity\"\u003e\\\"\u003c/span\u003e --no-track origin/master #\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eAnd I can use it as: \u003ccode\u003egit start feat/4605-new-task\u003c/code\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRelated: \u003ca href=\"/how-i-use-git\"\u003eHow I use Git\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n"},"_superjson":{"values":{"postData.date":["Date"]}}},"__N_SSG":true},"page":"/[postSlug]","query":{"postSlug":"stop-doing-git-checkout-master-branch"},"buildId":"jYrFetGvEqMrLd7L0Phnx","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>