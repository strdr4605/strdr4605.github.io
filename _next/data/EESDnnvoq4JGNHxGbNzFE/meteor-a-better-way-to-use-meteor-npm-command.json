{"pageProps":{"postData":{"title":"Meteor: a better way to use meteor npm command","date":"2022-01-13T00:00:00.000Z","description":"Did you forget to add meteor command before npm? Try adding a bash script that will make sure you always run it correctly.","tags":["tools","node","npm"],"slug":"meteor-a-better-way-to-use-meteor-npm-command","contentHtml":"<p>Meteor advice to run <a href=\"https://docs.meteor.com/commandline.html#meteornpm\"><code class=\"language-unknown\">meteor npm ...</code></a> instead of <code class=\"language-unknown\">npm ...</code>.</p>\n<blockquote>\n<p>Using the <code class=\"language-unknown\">meteor npm ...</code> commands in place of traditional <code class=\"language-unknown\">npm ...</code> commands is particularly important when using Node.js modules that have binary dependencies that make native C calls (like <code class=\"language-unknown\">bcrypt</code>) because doing so ensures that they are built using the same libaries.</p>\n</blockquote>\n<p>But if you are switching constantly between node projects (with/without meteor) sometimes you may forget to use <code class=\"language-unknown\">meteor npm ...</code> or use it in the wrong place.</p>\n<h2>Solution</h2>\n<p>We can create a bash function that will replace <code class=\"language-unknown\">npm</code> and run <code class=\"language-unknown\">meteor npm ...</code> if we have a <code class=\"language-unknown\">.meteor</code> folder in the project.</p>\n<blockquote>\n<p>as <a href=\"https://zodern.me/posts/meteor-local-folder/\">all Meteor apps have a .meteor directory</a></p>\n</blockquote>\n<p>Edit your shell config file with <strong>vim</strong>, <strong>nano</strong>, or <strong>vscode</strong>. Add this function at the end of the file.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Add me to shell config file. ~/.zshrc or ~/.bashrc</span>\n<span class=\"token assign-left variable\">ORIGINAL_NPM</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">which</span> <span class=\"token function\">npm</span><span class=\"token variable\">)</span></span>\n<span class=\"token function-name function\">npm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token assign-left variable\">RED</span><span class=\"token operator\">=</span><span class=\"token string\">'\\033[0;31m'</span>\n  <span class=\"token assign-left variable\">GREEN</span><span class=\"token operator\">=</span><span class=\"token string\">'\\033[0;92m'</span>\n  <span class=\"token assign-left variable\">NC</span><span class=\"token operator\">=</span><span class=\"token string\">'\\033[0m'</span> <span class=\"token comment\"># No Color</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token parameter variable\">-d</span> .meteor <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${RED}</span>Meteor project<span class=\"token variable\">${NC}</span><span title=\"\\n\" class=\"token entity\">\\n</span>Running:<span title=\"\\n\" class=\"token entity\">\\n</span><span title=\"\\n\" class=\"token entity\">\\n</span><span title=\"\\t\" class=\"token entity\">\\t</span><span class=\"token variable\">${GREEN}</span>meteor npm <span class=\"token variable\">$@</span><span class=\"token variable\">${NC}</span><span title=\"\\n\" class=\"token entity\">\\n</span>\"</span><span class=\"token punctuation\">;</span>\n    meteor <span class=\"token function\">npm</span> <span class=\"token variable\">$@</span>\n  <span class=\"token keyword\">else</span>\n    <span class=\"token builtin class-name\">eval</span> <span class=\"token variable\">$ORIGINAL_NPM</span> <span class=\"token variable\">$@</span>\n  <span class=\"token keyword\">fi</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>If needed we can also add another function for <code class=\"language-unknown\">meteor node</code>.</p>\n"},"_superjson":{"values":{"postData.date":["Date"]}}},"__N_SSG":true}