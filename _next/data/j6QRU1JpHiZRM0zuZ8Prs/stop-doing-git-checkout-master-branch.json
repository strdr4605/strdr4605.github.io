{"pageProps":{"postData":{"title":"Stop doing git checkout master branch","date":"2023-03-13T00:00:00.000Z","description":"My workflow when starting a new task for the project with git. How I checkout on a new branch based on origin/master branch.","tags":["git"],"slug":"stop-doing-git-checkout-master-branch","contentHtml":"<p>I see a common workflow when starting to work on new task:</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> checkout master\n<span class=\"token function\">git</span> pull <span class=\"token comment\"># or git pull -r</span>\n<span class=\"token function\">git</span> checkout <span class=\"token parameter variable\">-b</span> feat/4605-new-task\n</code></pre></div>\n<p>But I do things a bit differently. The main difference is that I don't care about the local <code>master</code> branch because the source of truth is always remote <code>origin/master</code>.\nI don't do commits on <code>master</code> branch, because all changes to the project are done through Pull Requests. So why should I keep the local <code>master</code> in sync with <code>origin/master</code>?</p>\n<p>You can do:</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> fetch <span class=\"token comment\"># get latest updates from origin/master</span>\n<span class=\"token function\">git</span> checkout <span class=\"token parameter variable\">-b</span> feat/4605-new-task origin/master <span class=\"token comment\"># --no-track</span>\n</code></pre></div>\n<p>And here is my workflow:</p>\n<p>The first thing I do is fetch the remote master branch to get the latest commits.</p>\n<p>I have an alias in my <code>.gitconfig</code> file:</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>alias<span class=\"token punctuation\">]</span>\n  fetch-and-clean-branches <span class=\"token operator\">=</span> <span class=\"token string\">\"!git fetch -p &#x26;&#x26; git branch -vv | grep ': gone]'|  grep -v \"</span><span class=\"token punctuation\">\\</span><span class=\"token punctuation\">\\</span>*<span class=\"token string\">\" | awk '{ print <span class=\"token variable\">$1</span>; }' | xargs git branch -D\"</span>\n</code></pre></div>\n<blockquote>\n<p><a href=\"https://morgan.cugerone.com/blog/quick-tip-how-to-locally-delete-all-remotely-merged-git-branches/\">How to locally delete all remotely merged git branches</a></p>\n</blockquote>\n<p>Running <code>git fetch-and-clean-branches</code>, will fetch new updates on remote branches and will remove local branches that are not relevant anymore.</p>\n<p>Next, I create a new branch based on <code>origin/master</code>:</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> checkout <span class=\"token parameter variable\">-b</span> feat/4605-new-task origin/master <span class=\"token comment\"># --no-track</span>\n</code></pre></div>\n<p>I also created an alias for this command:</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>alias<span class=\"token punctuation\">]</span>\n  fetch-and-clean-branches <span class=\"token operator\">=</span> <span class=\"token string\">\"!git fetch -p &#x26;&#x26; git branch -vv | grep ': gone]'|  grep -v \"</span><span class=\"token punctuation\">\\</span><span class=\"token punctuation\">\\</span>*<span class=\"token string\">\" | awk '{ print <span class=\"token variable\">$1</span>; }' | xargs git branch -D\"</span>\n  start <span class=\"token operator\">=</span> <span class=\"token string\">\"!git fetch-and-clean-branches &#x26;&#x26; git checkout -b <span title=\"\\&#x22;\" class=\"token entity\">\\\"</span><span class=\"token variable\">$1</span><span title=\"\\&#x22;\" class=\"token entity\">\\\"</span> --no-track origin/master #\"</span>\n</code></pre></div>\n<p>And I can use it as: <code>git start feat/4605-new-task</code>.</p>\n<hr>\n<blockquote>\n<p>Related: <a href=\"/how-i-use-git\">How I use Git</a></p>\n</blockquote>\n"},"_superjson":{"values":{"postData.date":["Date"]}}},"__N_SSG":true}