<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>You need to use Git worktree</title><meta name="description" content="A basic guide on why and how to use Git worktree feature."/><meta property="og:title" content="You need to use Git worktree"/><meta property="og:description" content="A basic guide on why and how to use Git worktree feature."/><meta property="og:image" content="https://strdr4605.com/you-need-to-use-git-worktree.jpg"/><meta property="og:type" content="article"/><link rel="canonical" href="https://strdr4605.com/you-need-to-use-git-worktree"/><link rel="stylesheet" href="https://unpkg.com/prismjs@1.28.0/plugins/diff-highlight/prism-diff-highlight.min.css"/><meta name="next-head-count" content="10"/><meta charSet="UTF-8"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><meta property="og:locale" content="en_GB"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@strdr4605"/><meta name="theme-color" content="#FAF181"/><link rel="preload" href="/_next/static/css/48668f542c06fc2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/48668f542c06fc2b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/bc274fc7c99985a3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bc274fc7c99985a3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-a14b3031894df84b.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-e267bb9839e5051c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0c351108ffe6ee8e.js" defer=""></script><script src="/_next/static/chunks/453-0a4b1ae71b489eee.js" defer=""></script><script src="/_next/static/chunks/pages/%5BpostSlug%5D-e608f0d849a4fb90.js" defer=""></script><script src="/_next/static/EESDnnvoq4JGNHxGbNzFE/_buildManifest.js" defer=""></script><script src="/_next/static/EESDnnvoq4JGNHxGbNzFE/_ssgManifest.js" defer=""></script><script src="/_next/static/EESDnnvoq4JGNHxGbNzFE/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Layout_container__n__U4"><article><h1>You need to use Git worktree</h1><i><time dateTime="2022-03-16">16 Mar 2022</time></i> on <a href="/"><span>Dragoș Străinu</span>&#x27;s blog</a><br/><div><p>Recently I found <code class="language-unknown">git worktree</code> feature and I plan to use it in all my projects.
Here is why and how you can use it.</p>
<h2>Why</h2>
<p>If you are working on a big project with a lot of issues and tasks, you constantly have to switch between branches to do some quick-fix changes or maybe review a PR from a teammate.
The problem is that often you have some work in progress and switching branches means that you need to commit or stash your WIP changes.
If it's only 1-2 files/changes the cost of commit/stash is not that high. But if you work on a big feature with over 9000 changes it's hard to constantly change branches.</p>
<h2>How</h2>
<p>Basically <code class="language-unknown">git worktree</code> command allows to create a new directory with desired git state.<br>
Actually, your current workspace is already in git worktree.<br>
You can type <code class="language-unknown">git worktree list</code> and you will see one item, which is your current git workspace.</p>
<p>Let's say you work on a big feature in your work project.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> worktree list
~/Work/project  17d8aab <span class="token punctuation">[</span>big-feature<span class="token punctuation">]</span>
</code></pre></div>
<p>And a quick-fix needs to be done from the <code class="language-unknown">origin/master</code>.
You can create a git worktree with the following command:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> worktree <span class="token function">add</span> <span class="token parameter variable">-b</span> quick-fix <span class="token punctuation">..</span>/quickfix origin/master
</code></pre></div>
<p>This command will create a new directory named <strong>quickfix</strong> at the same level as your <strong>project</strong> directory.<br>
The branch will be <code class="language-unknown">quick-fix</code> and it will be set at commit from <code class="language-unknown">origin/master</code>.<br>
You can see your git worktree:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> worktree list
~/Work/project   17d8aab <span class="token punctuation">[</span>big-feature<span class="token punctuation">]</span>
~/Work/quickfix  25e6c4b <span class="token punctuation">[</span>quick-fix<span class="token punctuation">]</span>
</code></pre></div>
<p>Next, you can navigate to <strong>quickfix</strong> directory, do your changes, push to remote, merge.</p>
<p>After you are done with <strong>quickfix</strong> you can remove the workspace with <code class="language-unknown">git worktree remove quickfix</code>.</p>
<h2>Conclusion</h2>
<p>This approach of using git worktree is not the most elegant but it's doing the job.
I might change the workflow (using bare git repos instead of normal repos) and will update this post.
For now you may check <a href="https://morgan.cugerone.com/blog/how-to-use-git-worktree-and-in-a-clean-way/">How to use git worktree and in a clean way</a>.</p>
<p>But I suggest to play a bit with git worktree if you have problems from <strong>Why</strong> section. And adding this git feature to your toolkit will make you a more productive engineer.</p>
<blockquote>
<p>Let me know if you have a nice workflow for git worktree!</p>
</blockquote>
</div><footer class="PostFooter_footer__nLJ4b">Liked this post? Follow me<!-- --> <a target="_blank" href="http://twitter.com/strdr4605" rel="noreferrer">@strdr4605</a> <!-- -->to get more updates.</footer></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"title":"You need to use Git worktree","date":"2022-03-16T00:00:00.000Z","description":"A basic guide on why and how to use Git worktree feature.","tags":["git"],"slug":"you-need-to-use-git-worktree","contentHtml":"\u003cp\u003eRecently I found \u003ccode class=\"language-unknown\"\u003egit worktree\u003c/code\u003e feature and I plan to use it in all my projects.\nHere is why and how you can use it.\u003c/p\u003e\n\u003ch2\u003eWhy\u003c/h2\u003e\n\u003cp\u003eIf you are working on a big project with a lot of issues and tasks, you constantly have to switch between branches to do some quick-fix changes or maybe review a PR from a teammate.\nThe problem is that often you have some work in progress and switching branches means that you need to commit or stash your WIP changes.\nIf it's only 1-2 files/changes the cost of commit/stash is not that high. But if you work on a big feature with over 9000 changes it's hard to constantly change branches.\u003c/p\u003e\n\u003ch2\u003eHow\u003c/h2\u003e\n\u003cp\u003eBasically \u003ccode class=\"language-unknown\"\u003egit worktree\u003c/code\u003e command allows to create a new directory with desired git state.\u003cbr\u003e\nActually, your current workspace is already in git worktree.\u003cbr\u003e\nYou can type \u003ccode class=\"language-unknown\"\u003egit worktree list\u003c/code\u003e and you will see one item, which is your current git workspace.\u003c/p\u003e\n\u003cp\u003eLet's say you work on a big feature in your work project.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003egit\u003c/span\u003e worktree list\n~/Work/project  17d8aab \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ebig-feature\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eAnd a quick-fix needs to be done from the \u003ccode class=\"language-unknown\"\u003eorigin/master\u003c/code\u003e.\nYou can create a git worktree with the following command:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003egit\u003c/span\u003e worktree \u003cspan class=\"token function\"\u003eadd\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e-b\u003c/span\u003e quick-fix \u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003e/quickfix origin/master\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis command will create a new directory named \u003cstrong\u003equickfix\u003c/strong\u003e at the same level as your \u003cstrong\u003eproject\u003c/strong\u003e directory.\u003cbr\u003e\nThe branch will be \u003ccode class=\"language-unknown\"\u003equick-fix\u003c/code\u003e and it will be set at commit from \u003ccode class=\"language-unknown\"\u003eorigin/master\u003c/code\u003e.\u003cbr\u003e\nYou can see your git worktree:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003egit\u003c/span\u003e worktree list\n~/Work/project   17d8aab \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ebig-feature\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n~/Work/quickfix  25e6c4b \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003equick-fix\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNext, you can navigate to \u003cstrong\u003equickfix\u003c/strong\u003e directory, do your changes, push to remote, merge.\u003c/p\u003e\n\u003cp\u003eAfter you are done with \u003cstrong\u003equickfix\u003c/strong\u003e you can remove the workspace with \u003ccode class=\"language-unknown\"\u003egit worktree remove quickfix\u003c/code\u003e.\u003c/p\u003e\n\u003ch2\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eThis approach of using git worktree is not the most elegant but it's doing the job.\nI might change the workflow (using bare git repos instead of normal repos) and will update this post.\nFor now you may check \u003ca href=\"https://morgan.cugerone.com/blog/how-to-use-git-worktree-and-in-a-clean-way/\"\u003eHow to use git worktree and in a clean way\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eBut I suggest to play a bit with git worktree if you have problems from \u003cstrong\u003eWhy\u003c/strong\u003e section. And adding this git feature to your toolkit will make you a more productive engineer.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eLet me know if you have a nice workflow for git worktree!\u003c/p\u003e\n\u003c/blockquote\u003e\n"},"_superjson":{"values":{"postData.date":["Date"]}}},"__N_SSG":true},"page":"/[postSlug]","query":{"postSlug":"you-need-to-use-git-worktree"},"buildId":"EESDnnvoq4JGNHxGbNzFE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>