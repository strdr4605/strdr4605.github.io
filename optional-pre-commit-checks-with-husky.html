<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Optional pre-commit checks with husky</title><meta name="description" content="How to make your husky pre-commit optional for each check"/><meta property="og:title" content="Optional pre-commit checks with husky"/><meta property="og:description" content="How to make your husky pre-commit optional for each check"/><meta property="og:image" content="https://strdr4605.com/optional-pre-commit-checks-with-husky.jpg"/><meta property="og:type" content="article"/><link rel="canonical" href="https://strdr4605.com/optional-pre-commit-checks-with-husky"/><meta name="next-head-count" content="9"/><meta charSet="UTF-8"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><meta property="og:locale" content="en_GB"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@strdr4605"/><meta name="theme-color" content="#FAF181"/><link rel="preload" href="/_next/static/css/83a77daccbc30077.css" as="style"/><link rel="stylesheet" href="/_next/static/css/83a77daccbc30077.css" data-n-g=""/><link rel="preload" href="/_next/static/css/bc274fc7c99985a3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bc274fc7c99985a3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9e60bad828f3ecaa.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-e267bb9839e5051c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0c351108ffe6ee8e.js" defer=""></script><script src="/_next/static/chunks/453-0a4b1ae71b489eee.js" defer=""></script><script src="/_next/static/chunks/pages/%5BpostSlug%5D-33ac54be726b76e3.js" defer=""></script><script src="/_next/static/jOJhBVfeJ6eo1hUDIrCJG/_buildManifest.js" defer=""></script><script src="/_next/static/jOJhBVfeJ6eo1hUDIrCJG/_ssgManifest.js" defer=""></script><script src="/_next/static/jOJhBVfeJ6eo1hUDIrCJG/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Layout_container__n__U4"><article><h1>Optional pre-commit checks with husky</h1><i><time dateTime="2022-03-31">31 Mar 2022</time></i> on <a href="/"><span>Dragoș Străinu</span>&#x27;s blog</a><br/><div><p>If you are working on a JavaScript project, you probably are using husky to check your <a href="/commitlint-custom-commit-message-with-emojis">commit messages</a>,
maybe do some Prettier, Eslint formatting, or TypeScript checks.</p>
<p>Checking commit messages is fast, but running formatting and type checking takes more time as your project grows.</p>
<p>You can use <a href="https://github.com/okonet/lint-staged">lint-staged</a> for prettier and eslint,
but using it for TypeScript check makes no sense because if you change types in a git staged file it may break typing in another file.</p>
<p>All engineers have different workflows. To fix an issue from the TypeScript compiler, you could run a <code>tsc --watch</code> process and make sure nothing is broken.</p>
<p>I don't want to run <code>tsc --watch</code> because constantly running it slows the laptop. I don't mind if this check will be done at pre-commit stage even if the commit will take 10,20,30+ seconds.</p>
<p>But how to make this pre-commit optional? So the teammates that do manually formatting and type checking will not be frustrated.</p>
<p><a href="https://www.npmjs.com/package/husky">husky</a> version 7 enables pre-commit configuration using a bash script. So why not do checking before running <code>tsc</code> or <code>lint-staged</code>?!</p>
<p>This will be the beginning of the <code>.husky/pre-commit</code> file</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token builtin class-name">.</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">"<span class="token variable">$0</span>"</span><span class="token variable">)</span></span>/_/husky.sh"</span>

<span class="token assign-left variable">APP_PRE_COMMIT_OPTIONS</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">"<span class="token variable">$0</span>"</span><span class="token variable">)</span></span>/_/pre-commit.options"</span>
</code></pre></div>
<p>So we can put our options in a file named <code>pre-commit.options</code> inside the <code>.husky/_/</code> folder.</p>
<blockquote>
<p><code>.husky/_/</code> should have a <code>.gitingore</code> file that will ignore our option file.</p>
</blockquote>
<p>Next, let's print some message if the options files do not exist</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">YELLOW</span><span class="token operator">=</span><span class="token string">"<span title="\033" class="token entity">\033</span>[1;33m"</span>
<span class="token assign-left variable">GREEN</span><span class="token operator">=</span><span class="token string">"<span title="\033" class="token entity">\033</span>[1;32m"</span>
<span class="token assign-left variable">RESET</span><span class="token operator">=</span><span class="token string">"<span title="\033" class="token entity">\033</span>[0m"</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">"<span class="token variable">$APP_PRE_COMMIT_OPTIONS</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${YELLOW}</span><span title="\n" class="token entity">\n</span>Skipping pre-commit hook."</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"If you want to use pre-commit for TypeScript check and lint-staged, run:<span title="\n" class="token entity">\n</span>"</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"  <span class="token variable">${GREEN}</span>echo -e 'APP_TS=true;<span title="\\" class="token entity">\\</span><span title="\n" class="token entity">\n</span>APP_LINT=true;' > <span class="token variable">$P_APP_PRE_COMMIT_OPTIONS</span><span class="token variable">${RESET}</span>"</span>
  <span class="token builtin class-name">echo</span> <span class="token variable">${YELLOW}</span><span class="token punctuation">\</span>nIt will <span class="token function">add</span> some delay before committing<span class="token operator">!</span><span class="token punctuation">\</span>n<span class="token variable">${RESET}</span>"
  <span class="token builtin class-name">exit</span> <span class="token number">0</span>
<span class="token keyword">fi</span>

</code></pre></div>
<p><img src="/optional-pre-commit.png" alt="optional-pre-commit"></p>
<p>Now, let's source the options file and check if the user enabled the linting:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">source</span> <span class="token variable">$APP_PRE_COMMIT_OPTIONS</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">${APP_LINT}</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&#x26;&#x26;</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${APP_LINT}</span>"</span> <span class="token operator">==</span> <span class="token string">"true"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${GREEN}</span>[husky] [pre-commit] [lint-staged]<span class="token variable">${RESET}</span>"</span>
  npx lint-staged
<span class="token keyword">fi</span>
</code></pre></div>
<p>You can add more options and checks if needed!</p>
<h2>Final result</h2>
<p>The <code>.husky/pre-commit</code> file should look similar to this:</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token builtin class-name">.</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">"<span class="token variable">$0</span>"</span><span class="token variable">)</span></span>/_/husky.sh"</span>

<span class="token assign-left variable">APP_PRE_COMMIT_OPTIONS</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">"<span class="token variable">$0</span>"</span><span class="token variable">)</span></span>/_/pre-commit.options"</span>

<span class="token assign-left variable">YELLOW</span><span class="token operator">=</span><span class="token string">"<span title="\033" class="token entity">\033</span>[1;33m"</span>
<span class="token assign-left variable">GREEN</span><span class="token operator">=</span><span class="token string">"<span title="\033" class="token entity">\033</span>[1;32m"</span>
<span class="token assign-left variable">RESET</span><span class="token operator">=</span><span class="token string">"<span title="\033" class="token entity">\033</span>[0m"</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">"<span class="token variable">$APP_PRE_COMMIT_OPTIONS</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${YELLOW}</span><span title="\n" class="token entity">\n</span>Skipping pre-commit hook."</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"If you want to use pre-commit for TypeScript check and lint-staged, run:<span title="\n" class="token entity">\n</span>"</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"  <span class="token variable">${GREEN}</span>echo -e 'APP_TS=true;<span title="\\" class="token entity">\\</span><span title="\n" class="token entity">\n</span>APP_LINT=true;' > <span class="token variable">$P_APP_PRE_COMMIT_OPTIONS</span><span class="token variable">${RESET}</span>"</span>
  <span class="token builtin class-name">echo</span> <span class="token variable">${YELLOW}</span><span class="token punctuation">\</span>nIt will <span class="token function">add</span> some delay before committing<span class="token operator">!</span><span class="token punctuation">\</span>n<span class="token variable">${RESET}</span><span class="token string">"
  exit 0
fi

source <span class="token variable">$APP_PRE_COMMIT_OPTIONS</span>

if [ -n "</span><span class="token variable">${APP_TS}</span><span class="token string">" ] &#x26;&#x26; [ "</span><span class="token variable">${APP_TS}</span><span class="token string">" == "</span><span class="token boolean">true</span><span class="token string">" ]; then</span>
<span class="token string">  echo "</span><span class="token variable">${GREEN}</span><span class="token punctuation">[</span>husky<span class="token punctuation">]</span> <span class="token punctuation">[</span>pre-commit<span class="token punctuation">]</span> <span class="token punctuation">[</span>tsc<span class="token punctuation">]</span><span class="token variable">${RESET}</span><span class="token string">"</span>
<span class="token string">  npx tsc</span>
<span class="token string">fi</span>
<span class="token string"></span>
<span class="token string">if [ -n "</span><span class="token variable">${APP_LINT}</span><span class="token string">" ] &#x26;&#x26; [ "</span><span class="token variable">${APP_LINT}</span><span class="token string">" == "</span><span class="token boolean">true</span><span class="token string">" ]; then</span>
<span class="token string">  echo "</span><span class="token variable">${GREEN}</span><span class="token punctuation">[</span>husky<span class="token punctuation">]</span> <span class="token punctuation">[</span>pre-commit<span class="token punctuation">]</span> <span class="token punctuation">[</span>lint-staged<span class="token punctuation">]</span><span class="token variable">${RESET}</span>"
  npx lint-staged
<span class="token keyword">fi</span>
</code></pre></div>
</div><footer class="PostFooter_footer__nLJ4b">Liked this post? Follow me<!-- --> <a target="_blank" href="http://twitter.com/strdr4605" rel="noreferrer">@strdr4605</a> <!-- -->to get more updates.</footer></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"title":"Optional pre-commit checks with husky","date":"2022-03-31T00:00:00.000Z","description":"How to make your husky pre-commit optional for each check","tags":["git","node","tools"],"slug":"optional-pre-commit-checks-with-husky","contentHtml":"\u003cp\u003eIf you are working on a JavaScript project, you probably are using husky to check your \u003ca href=\"/commitlint-custom-commit-message-with-emojis\"\u003ecommit messages\u003c/a\u003e,\nmaybe do some Prettier, Eslint formatting, or TypeScript checks.\u003c/p\u003e\n\u003cp\u003eChecking commit messages is fast, but running formatting and type checking takes more time as your project grows.\u003c/p\u003e\n\u003cp\u003eYou can use \u003ca href=\"https://github.com/okonet/lint-staged\"\u003elint-staged\u003c/a\u003e for prettier and eslint,\nbut using it for TypeScript check makes no sense because if you change types in a git staged file it may break typing in another file.\u003c/p\u003e\n\u003cp\u003eAll engineers have different workflows. To fix an issue from the TypeScript compiler, you could run a \u003ccode\u003etsc --watch\u003c/code\u003e process and make sure nothing is broken.\u003c/p\u003e\n\u003cp\u003eI don't want to run \u003ccode\u003etsc --watch\u003c/code\u003e because constantly running it slows the laptop. I don't mind if this check will be done at pre-commit stage even if the commit will take 10,20,30+ seconds.\u003c/p\u003e\n\u003cp\u003eBut how to make this pre-commit optional? So the teammates that do manually formatting and type checking will not be frustrated.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.npmjs.com/package/husky\"\u003ehusky\u003c/a\u003e version 7 enables pre-commit configuration using a bash script. So why not do checking before running \u003ccode\u003etsc\u003c/code\u003e or \u003ccode\u003elint-staged\u003c/code\u003e?!\u003c/p\u003e\n\u003cp\u003eThis will be the beginning of the \u003ccode\u003e.husky/pre-commit\u003c/code\u003e file\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token shebang important\"\u003e#!/bin/sh\u003c/span\u003e\n\u003cspan class=\"token builtin class-name\"\u003e.\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token variable\"\u003e$(\u003c/span\u003e\u003cspan class=\"token function\"\u003edirname\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$0\u003c/span\u003e\"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e)\u003c/span\u003e\u003c/span\u003e/_/husky.sh\"\u003c/span\u003e\n\n\u003cspan class=\"token assign-left variable\"\u003eAPP_PRE_COMMIT_OPTIONS\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token variable\"\u003e$(\u003c/span\u003e\u003cspan class=\"token function\"\u003edirname\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$0\u003c/span\u003e\"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e)\u003c/span\u003e\u003c/span\u003e/_/pre-commit.options\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eSo we can put our options in a file named \u003ccode\u003epre-commit.options\u003c/code\u003e inside the \u003ccode\u003e.husky/_/\u003c/code\u003e folder.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003e.husky/_/\u003c/code\u003e should have a \u003ccode\u003e.gitingore\u003c/code\u003e file that will ignore our option file.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eNext, let's print some message if the options files do not exist\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token assign-left variable\"\u003eYELLOW\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan title=\"\\033\" class=\"token entity\"\u003e\\033\u003c/span\u003e[1;33m\"\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eGREEN\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan title=\"\\033\" class=\"token entity\"\u003e\\033\u003c/span\u003e[1;32m\"\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eRESET\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan title=\"\\033\" class=\"token entity\"\u003e\\033\u003c/span\u003e[0m\"\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e-f\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$APP_PRE_COMMIT_OPTIONS\u003c/span\u003e\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethen\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e${YELLOW}\u003c/span\u003e\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003eSkipping pre-commit hook.\"\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"If you want to use pre-commit for TypeScript check and lint-staged, run:\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003e\"\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"  \u003cspan class=\"token variable\"\u003e${GREEN}\u003c/span\u003eecho -e 'APP_TS=true;\u003cspan title=\"\\\\\" class=\"token entity\"\u003e\\\\\u003c/span\u003e\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003eAPP_LINT=true;' \u003e \u003cspan class=\"token variable\"\u003e$P_APP_PRE_COMMIT_OPTIONS\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${RESET}\u003c/span\u003e\"\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token variable\"\u003e${YELLOW}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003enIt will \u003cspan class=\"token function\"\u003eadd\u003c/span\u003e some delay before committing\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003en\u003cspan class=\"token variable\"\u003e${RESET}\u003c/span\u003e\"\n  \u003cspan class=\"token builtin class-name\"\u003eexit\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efi\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/optional-pre-commit.png\" alt=\"optional-pre-commit\"\u003e\u003c/p\u003e\n\u003cp\u003eNow, let's source the options file and check if the user enabled the linting:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token builtin class-name\"\u003esource\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$APP_PRE_COMMIT_OPTIONS\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e-n\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e${APP_LINT}\u003c/span\u003e\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e${APP_LINT}\u003c/span\u003e\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"true\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethen\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e${GREEN}\u003c/span\u003e[husky] [pre-commit] [lint-staged]\u003cspan class=\"token variable\"\u003e${RESET}\u003c/span\u003e\"\u003c/span\u003e\n  npx lint-staged\n\u003cspan class=\"token keyword\"\u003efi\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eYou can add more options and checks if needed!\u003c/p\u003e\n\u003ch2\u003eFinal result\u003c/h2\u003e\n\u003cp\u003eThe \u003ccode\u003e.husky/pre-commit\u003c/code\u003e file should look similar to this:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token shebang important\"\u003e#!/bin/sh\u003c/span\u003e\n\u003cspan class=\"token builtin class-name\"\u003e.\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token variable\"\u003e$(\u003c/span\u003e\u003cspan class=\"token function\"\u003edirname\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$0\u003c/span\u003e\"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e)\u003c/span\u003e\u003c/span\u003e/_/husky.sh\"\u003c/span\u003e\n\n\u003cspan class=\"token assign-left variable\"\u003eAPP_PRE_COMMIT_OPTIONS\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token variable\"\u003e$(\u003c/span\u003e\u003cspan class=\"token function\"\u003edirname\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$0\u003c/span\u003e\"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e)\u003c/span\u003e\u003c/span\u003e/_/pre-commit.options\"\u003c/span\u003e\n\n\u003cspan class=\"token assign-left variable\"\u003eYELLOW\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan title=\"\\033\" class=\"token entity\"\u003e\\033\u003c/span\u003e[1;33m\"\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eGREEN\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan title=\"\\033\" class=\"token entity\"\u003e\\033\u003c/span\u003e[1;32m\"\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eRESET\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan title=\"\\033\" class=\"token entity\"\u003e\\033\u003c/span\u003e[0m\"\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e-f\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$APP_PRE_COMMIT_OPTIONS\u003c/span\u003e\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethen\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e${YELLOW}\u003c/span\u003e\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003eSkipping pre-commit hook.\"\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"If you want to use pre-commit for TypeScript check and lint-staged, run:\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003e\"\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"  \u003cspan class=\"token variable\"\u003e${GREEN}\u003c/span\u003eecho -e 'APP_TS=true;\u003cspan title=\"\\\\\" class=\"token entity\"\u003e\\\\\u003c/span\u003e\u003cspan title=\"\\n\" class=\"token entity\"\u003e\\n\u003c/span\u003eAPP_LINT=true;' \u003e \u003cspan class=\"token variable\"\u003e$P_APP_PRE_COMMIT_OPTIONS\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${RESET}\u003c/span\u003e\"\u003c/span\u003e\n  \u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token variable\"\u003e${YELLOW}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003enIt will \u003cspan class=\"token function\"\u003eadd\u003c/span\u003e some delay before committing\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003en\u003cspan class=\"token variable\"\u003e${RESET}\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\n  exit 0\nfi\n\nsource \u003cspan class=\"token variable\"\u003e$APP_PRE_COMMIT_OPTIONS\u003c/span\u003e\n\nif [ -n \"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${APP_TS}\u003c/span\u003e\u003cspan class=\"token string\"\u003e\" ] \u0026#x26;\u0026#x26; [ \"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${APP_TS}\u003c/span\u003e\u003cspan class=\"token string\"\u003e\" == \"\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token string\"\u003e\" ]; then\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e  echo \"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${GREEN}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ehusky\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003epre-commit\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003etsc\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${RESET}\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e  npx tsc\u003c/span\u003e\n\u003cspan class=\"token string\"\u003efi\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e\u003c/span\u003e\n\u003cspan class=\"token string\"\u003eif [ -n \"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${APP_LINT}\u003c/span\u003e\u003cspan class=\"token string\"\u003e\" ] \u0026#x26;\u0026#x26; [ \"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${APP_LINT}\u003c/span\u003e\u003cspan class=\"token string\"\u003e\" == \"\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token string\"\u003e\" ]; then\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e  echo \"\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${GREEN}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ehusky\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003epre-commit\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003elint-staged\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token variable\"\u003e${RESET}\u003c/span\u003e\"\n  npx lint-staged\n\u003cspan class=\"token keyword\"\u003efi\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n"},"_superjson":{"values":{"postData.date":["Date"]}}},"__N_SSG":true},"page":"/[postSlug]","query":{"postSlug":"optional-pre-commit-checks-with-husky"},"buildId":"jOJhBVfeJ6eo1hUDIrCJG","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>